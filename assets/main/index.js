System.register("chunks:///_virtual/arrow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,o,n,r,s,c,a;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,s=i._decorator,c=i.Vec3,a=i.Component}],execute:function(){var h,d,p;r._RF.push({},"237c7b+bxhGDKJ44HAIyE/G","arrow",void 0);var u=s.ccclass,l=s.property;i("arrow",u("arrow")((p=t((d=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=i.call.apply(i,[this].concat(r))||this,o(t,"speed",p,n(t)),t.direction=1,t.origin=new c,t}e(t,i);var r=t.prototype;return r.init=function(i,t){this.direction=i,this.origin.set(t)},r.update=function(i){1==this.direction?(this.node.setScale(1,1),this.node.setPosition(this.node.getPosition().x+this.speed*i*this.direction,this.node.position.y)):-1==this.direction&&(this.node.setScale(-1,-1),this.node.setPosition(this.node.getPosition().x+this.speed*i*this.direction,this.node.position.y)),this.node.getPosition().subtract(this.origin).length()>1e3&&this.node.destroy()},t}(a)).prototype,"speed",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),h=d))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/bag.ts",["./rollupPluginModLoBabelHelpers.js","cc","./conf.ts","./tool.ts","./dialogue.ts","./hero.ts","./GlobalData.ts"],(function(e){var t,o,n,r,a,i,l,s,u,c,m,h,p,d,g,y,f,T,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,l=e.Node,s=e.Prefab,u=e.director,c=e.Input,m=e.find,h=e.instantiate,p=e.Component},function(e){d=e.conf},function(e){g=e.tool},function(e){y=e.dialogue},function(e){f=e.hero,T=e.CharacterMode},function(e){b=e.GlobalData}],execute:function(){var v,C,A,N,F,S,L,O,w;a._RF.push({},"8460dnm+vhOmLd5cRJqk/qH","bag",void 0);var E=i.ccclass,U=i.property;e("bag",(v=E("bag"),C=U(l),A=U(s),N=U(l),v((L=t((S=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,n(t,"gridLayout",L,r(t)),n(t,"toolPrefab",O,r(t)),n(t,"Touch",w,r(t)),t.toolsArray=void 0,t.mailerAlreadyUsed=!1,t.swordAlreadyUsed=!1,t.bowAlreadyUsed=!1,t.playerName=void 0,t.globalNode=void 0,t}o(t,e);var a=t.prototype;return a.start=function(){u.addPersistRootNode(this.node),this.Touch.on(c.EventType.TOUCH_START,this.onTouchStart,this),this.Touch.on(c.EventType.TOUCH_END,this.onTouchEnd,this),this.globalNode=m("GlobalNode").getComponent(b),this.playerName=this.globalNode.getGameData().player_name},a.spawnTools=function(){this.toolsArray=[];for(var e=0;e<d.TOOLS.length;e++){var t=h(this.toolPrefab);t.on(c.EventType.TOUCH_START,this.onTouchStartTool,this),t.getComponent(g).init(d.TOOLS[e]),this.toolsArray.push(t),this.gridLayout.addChild(t)}},a.onTouchEnd=function(e){this.Touch.setScale(1,1)},a.onTouchStart=function(e){this.Touch.setScale(.9,.9),this.gridLayout.parent.active?(this.gridLayout.parent.active=!1,this.toolsArray.forEach((function(e){e.removeFromParent()}))):(this.gridLayout.parent.active=!0,this.spawnTools())},a.onTouchStartTool=function(e){for(var t=e.target.getComponent(g).getToolName(),o=u.getScene().name,n=m("Canvas/dialogue-bubble"),r=m("Canvas/hero"),a=null,i=0;i<d.TOOLS.length;i++)if(d.TOOLS[i].name===t){a=d.TOOLS[i];break}if(!n.active){switch(t){case"信封":"TAKE1"!=o||this.mailerAlreadyUsed?n.getComponent(y).init([a,{name:"旁白",content:"（似乎什麼事都沒發生）",url:null}]):(this.mailerAlreadyUsed=!0,n.getComponent(y).init([a,{name:"信封",content:"「好久不見，"+this.playerName+"，不知道你過得好嗎？因為一些原因，我離開了孤兒院，成為了一名祭司，信封中的吊墜是我替你保管的，如果你有感應到什麼的話，就來找我吧。」",url:"tools/mailer/spriteFrame"},{name:this.playerName,content:"（翻至信件背面）",url:"Dialog/role/hero/spriteFrame"},{name:"信封",content:"「El-Gamaleya, 吉薩省 4304122埃及——樂媞．艾利特」",url:"tools/mailer/spriteFrame"},{name:this.playerName,content:"樂媞...好熟悉的名字，是我小時候在孤兒院的玩伴嗎？",url:"Dialog/role/hero/spriteFrame"},{name:"旁白",content:"（困惑之際，信封中掉出了一個奇怪的東西）",url:null},{name:"系統提示",content:"獲得道具「聖甲蟲吊墜」",url:"tools/pendant/spriteFrame"}]),d.TOOLS.push({name:"聖甲蟲吊墜",content:"這個吊墜似乎與古埃及神祇有著神祕的聯繫（點擊使用）",url:"tools/pendant/spriteFrame"}));break;case"聖甲蟲吊墜":"TAKE1"==o?n.getComponent(y).init([a,{name:"旁白",content:"（"+this.playerName+"戴起了那個未知的吊墜，隨即感到暈頭轉向，並昏了過去）",url:null}]):n.getComponent(y).init([a,{name:"旁白",content:"（似乎什麼事都沒發生）",url:null}]);break;case"荷魯斯之戒":"TAKE4"==o?n.getComponent(y).init([a,{name:"旁白",content:"（不明所以的"+this.playerName+"，正準備繼續前進，卻突然發現自己可以讀懂牆上的文字）",url:null},{name:"荷魯斯之戒",content:"「傳聞有之，孔蘇手持二寶。其一，曰「月輪」，潔白無瑕，如玉凝冰；其二，號「生命之符」，能治癒眾生；至於用途，則是...」",url:"tools/ring/spriteFrame"},{name:"旁白",content:"（牆上的內容到這邊就中斷了）",url:null},{name:this.playerName,content:"後續呢？",url:"Dialog/role/hero/spriteFrame"}]):n.getComponent(y).init([a,{name:"旁白",content:"（似乎什麼事都沒發生）",url:null}]);break;case"卷軸":"TAKE3"==o?n.getComponent(y).init([a,{name:"卷軸",content:"「孔蘇是古埃及王國的第一代月神，也是治癒之神。他曾幫助人類治病、除暴安良，因而深受人民愛戴。然而，他不幸墜入了一場禁忌的愛情，深深愛上了一位名叫努特的人類女子，努特有著傾國傾城的容貌，卻身患怪病，久病不癒。」",url:"tools/reel/spriteFrame"},{name:"卷軸",content:"「為了拯救自己的愛人，孔蘇將自己的部分力量轉移給努特，延續她的生命，自己則陷入了沉睡。得知這個消息的國王畏懼努特的力量，為了保住王位，他決定陷害努特戴上特製的聖甲蟲吊墜，吸取他的力量。」",url:"tools/reel/spriteFrame"},{name:"卷軸",content:"「王宮內有位曾受孔蘇幫助的大臣知曉國王的意圖後，便偷偷將這消息告訴了努特。當時已懷有身孕的努特，帶著大臣從皇宮內偷來的聖甲蟲吊墜，展開了逃亡，並在逃亡途中生下了一個嬰兒。」",url:"tools/reel/spriteFrame"},{name:"卷軸",content:"「努特為了保護孩子，讓吊墜吸收自己的力量，並將吊墜與孩子託付給孔蘇的信徒，自己前往皇宮自首。國王逮住努特後，卻發現他早已沒了神力，吊墜也不知去向，於是便把努特與走漏風聲的大臣一同處死。」",url:"tools/reel/spriteFrame"},{name:"卷軸",content:"「醒來後的孔蘇發現努特慘遭殺害，小孩也不知去向，即便憤怒充斥著他的內心，但力量所剩無幾的他也無力回天。神留下了最後一句警告：“人類，你會為你的所做所為付出代價！”語畢，他透過金字塔內的傳送門返回月球，等待著復仇的時刻。」",url:"tools/reel/spriteFrame"},{name:this.playerName,content:"原來夢中的那個聲音就是孔蘇...看來我得前往金字塔尋找傳送門，並想辦法阻止他",url:"Dialog/role/hero/spriteFrame"},{name:"旁白",content:"話音剛落，聖甲蟲吊墜彷彿聽到了"+this.playerName+"的心聲，展開翅膀朝著某個方向飛去，"+this.playerName+"也跟了上去",url:null}]):n.getComponent(y).init([a,{name:"旁白",content:"（似乎什麼事都沒發生）",url:null}]);break;case"月輪":case"生命之符":n.getComponent(y).init([a]);break;case"劫墓之刃":this.swordAlreadyUsed||n.getComponent(y).init([a]),this.swordAlreadyUsed=!0,r.getComponent(f).heroMode=T.sword;break;case"三角弓":this.bowAlreadyUsed||n.getComponent(y).init([a]),this.bowAlreadyUsed=!0,r.getComponent(f).heroMode=T.bow}this.gridLayout.parent.active=!1,this.toolsArray.forEach((function(e){e.removeFromParent()}))}},a.update=function(e){"START"==u.getScene().name&&u.removePersistRootNode(this.node)},t}(p)).prototype,"gridLayout",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(S.prototype,"toolPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(S.prototype,"Touch",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=S))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/bandit.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,a,n,s,o,r,h,c,l,d,p,u,g;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,r=t.CCFloat,h=t.CCInteger,c=t.ProgressBar,l=t.Animation,d=t.find,p=t.Vec3,u=t.Color,g=t.Component}],execute:function(){var b,k,f,m,C,D,A,y,v,S,H,I,P;s._RF.push({},"c7fa5AqvTpAwoxRaHUvgUHW","bandit",void 0);var B=o.ccclass,W=o.property,F=t("State",function(t){return t[t.isWalkingRight=0]="isWalkingRight",t[t.isWalkingLeft=1]="isWalkingLeft",t[t.isAttacking=2]="isAttacking",t[t.isIdle=3]="isIdle",t[t.isDie=4]="isDie",t[t.isHurt=5]="isHurt",t}({}));t("bandit",(b=B("bandit"),k=W({type:r}),f=W({type:r}),m=W({type:h}),C=W({type:r}),D=W(c),b((v=i((y=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s))||this,a(i,"hp",v,n(i)),a(i,"speed",S,n(i)),a(i,"attackPower",H,n(i)),a(i,"maxHp",I,n(i)),a(i,"healthBar",P,n(i)),i.banditState=F.isIdle,i.CD=!1,i.callback=void 0,i.attackCallback=void 0,i.isAttacking=!1,i.isDead=!1,i.heroNode=void 0,i.reciveDamage=void 0,i}e(i,t);var s=i.prototype;return s.start=function(){this.node.getComponent(l).on(l.EventType.FINISHED,this.onAnimationFINISHED,this),this.node.getComponent(l).on(l.EventType.PLAY,this.onAnimationPLAY,this),this.heroNode=d("Canvas/hero"),this.callback=function(){var t=this.heroNode.getPosition(),i=this.node.getPosition(),e=p.distance(i,t);if(e<=110&&!this.CD)this.banditState=F.isAttacking;else if(e<=110&&this.CD)this.banditState=F.isIdle;else if(e<=580){t.subtract(i).x<0?this.banditState=F.isWalkingLeft:this.banditState=F.isWalkingRight}else this.banditState=F.isIdle},this.schedule(this.callback,.006),this.attackCallback=function(){this.CD=!this.CD}},s.updateHealthBar=function(t){this.healthBar.getComponent(c).progress=this.hp/t,this.healthBar.getComponent(c).progress>.7?this.healthBar.getComponent(c).barSprite.color=u.GREEN:this.healthBar.getComponent(c).progress>.5?this.healthBar.getComponent(c).barSprite.color=u.YELLOW:this.healthBar.getComponent(c).barSprite.color=u.RED},s.onAnimationFINISHED=function(t,i){var e=this;"banditAttack"===i.name&&(this.isAttacking=!1,this.CD=!this.CD,this.scheduleOnce(this.attackCallback,2.5),this.banditState=F.isIdle),"banditDeath"===i.name&&(this.banditState=null,this.scheduleOnce((function(){e.healthBar.node.active=!1}),2))},s.onAnimationPLAY=function(t,i){"banditHurt"!==i.name||this.isAttacking||this.hp--,"banditAttack"===i.name&&(this.isAttacking=!0)},s.banditTakeDamage=function(t){this.reciveDamage=t},s.update=function(t){if(this.updateHealthBar(this.maxHp),!this.isAttacking&&!this.isDead)switch(this.banditState){case F.isWalkingRight:this.getComponent(l).crossFade("banditWalk",.1),this.node.setPosition(this.node.getPosition().x+=this.speed*t,this.node.position.y),this.node.setScale(-1,1);break;case F.isWalkingLeft:this.getComponent(l).crossFade("banditWalk",.1),this.node.setPosition(this.node.getPosition().x-=this.speed*t,this.node.position.y),this.node.setScale(1,1);break;case F.isAttacking:this.getComponent(l).crossFade("banditAttack",.1);break;case F.isIdle:this.getComponent(l).crossFade("banditIdle",.1);break;case F.isHurt:this.getComponent(l).crossFade("banditHurt",.1);break;case F.isDie:this.unschedule(this.callback),this.isDead=!0,this.node.setScale(1,1),this.getComponent(l).play("banditDeath")}},i}(g)).prototype,"hp",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=i(y.prototype,"speed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=i(y.prototype,"attackPower",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=i(y.prototype,"maxHp",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 12}}),P=i(y.prototype,"healthBar",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=y))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/boss.ts",["./rollupPluginModLoBabelHelpers.js","cc","./spell.ts"],(function(t){var e,s,i,a,o,n,r,l,h,c,p,b,u,d,g,k,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,n=t._decorator,r=t.CCFloat,l=t.CCInteger,h=t.Node,c=t.Prefab,p=t.ProgressBar,b=t.Animation,u=t.Vec3,d=t.Color,g=t.instantiate,k=t.Component},function(t){f=t.spell}],execute:function(){var m,C,v,D,S,y,A,P,I,R,H,B,F,w,L;o._RF.push({},"f3a7fGAlSZMa7TXiudMQhzq","boss",void 0);var W=n.ccclass,z=n.property,E=t("State",function(t){return t[t.isWalkingRight=0]="isWalkingRight",t[t.isWalkingLeft=1]="isWalkingLeft",t[t.isAttacking=2]="isAttacking",t[t.isIdle=3]="isIdle",t[t.isDie=4]="isDie",t[t.isHurt=5]="isHurt",t[t.isRelive=6]="isRelive",t}({})),N=t("Mode",function(t){return t[t.cast=0]="cast",t[t.slash=1]="slash",t}({}));t("boss",(m=W("boss"),C=z({type:r}),v=z({type:r}),D=z({type:l}),S=z(h),y=z(c),A=z(p),m((R=e((I=function(t){function e(){for(var e,s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,i(e,"hp",R,a(e)),i(e,"speed",H,a(e)),i(e,"attackPower",B,a(e)),i(e,"heroNode",F,a(e)),i(e,"spellPrefab",w,a(e)),i(e,"healthBar",L,a(e)),e.bossState=E.isIdle,e.bossMode=N.slash,e.CD=!1,e.callback=void 0,e.attackCallback=void 0,e.isAttacking=!1,e.isDead=!1,e.isHurt=!1,e.reciveDamage=void 0,e.spell=void 0,e.attackRange=200,e}s(e,t);var o=e.prototype;return o.start=function(){var t=this.node.getComponent(b);t.on(b.EventType.FINISHED,this.onAnimationFINISHED,this),t.on(b.EventType.PLAY,this.onAnimationPLAY,this),this.callback=function(){var t=this.node.getPosition(),e=this.heroNode.getPosition(),s=u.distance(t,e);if(s<=this.attackRange&&!this.CD)this.bossState=E.isAttacking;else if(s<=this.attackRange&&this.CD)this.bossState=E.isIdle;else if(s<=3e3){e.subtract(t).x<0?this.bossState=E.isWalkingLeft:this.bossState=E.isWalkingRight}else this.bossState=E.isIdle}.bind(this),this.attackCallback=function(){this.CD=!1}.bind(this)},o.updateHealthBar=function(){this.healthBar.getComponent(p).progress=this.hp/50,this.healthBar.getComponent(p).progress>.7?this.healthBar.getComponent(p).barSprite.color=d.GREEN:this.healthBar.getComponent(p).progress>.5?this.healthBar.getComponent(p).barSprite.color=d.YELLOW:this.healthBar.getComponent(p).barSprite.color=d.RED},o.castSpell=function(){this.spell=g(this.spellPrefab),this.spell.parent=this.node.parent,this.spell.setPosition(this.heroNode.position.x,this.node.position.y),this.spell.getComponent(f).init(this.spell.position)},o.onAnimationFINISHED=function(t,e){"bossAttack"===e.name?(this.isAttacking=!1,this.CD=!0,this.scheduleOnce(this.attackCallback,2),this.bossState=E.isIdle):"bossCast"===e.name?(this.isAttacking=!1,this.CD=!0,this.scheduleOnce(this.attackCallback,2.5),this.bossState=E.isIdle,this.castSpell()):"bossDead"===e.name?(this.bossState=null,this.node.active=!1,this.healthBar.node.active=!1):("bossRelive"===e.name||"bossHurt"===e.name)&&(this.bossState=E.isIdle)},o.onAnimationPLAY=function(t,e){"bossHurt"===e.name?(this.hp-=this.reciveDamage,this.isHurt=!0):"bossAttack"!==e.name&&"bossCast"!==e.name||(this.isAttacking=!0)},o.bossTakeDamage=function(t){this.reciveDamage=t},o.update=function(t){if(this.updateHealthBar(),!this.isAttacking&&!this.isDead){this.bossMode==N.cast?(this.attackRange=600,this.attackPower=3):(this.attackRange=200,this.attackPower=3.5);var e=this.node.getComponent(b);switch(this.bossState){case E.isWalkingRight:e.crossFade("bossWalk",.1),this.node.setPosition(this.node.getPosition().x+this.speed*t,this.node.position.y),this.node.setScale(-1,1);break;case E.isWalkingLeft:e.crossFade("bossWalk",.1),this.node.setPosition(this.node.getPosition().x-this.speed*t,this.node.position.y),this.node.setScale(1,1);break;case E.isAttacking:this.isAttacking||(this.bossMode==N.cast?e.crossFade("bossCast",.1):this.bossMode==N.slash&&e.crossFade("bossAttack",.1));break;case E.isIdle:e.crossFade("bossIdle",.1);break;case E.isHurt:e.crossFade("bossHurt",.1);break;case E.isRelive:e.crossFade("bossRelive");break;case E.isDie:this.isDead=!0,e.play("bossDead")}}},e}(k)).prototype,"hp",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=e(I.prototype,"speed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=e(I.prototype,"attackPower",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),F=e(I.prototype,"heroNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(I.prototype,"spellPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(I.prototype,"healthBar",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=I))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/cameraCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,a,o,s,r,n,l,m,p,h,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,n=t.Node,l=t.v2,m=t.UITransform,p=t.view,h=t.lerp,c=t.Component}],execute:function(){var u,f,C,P,y,x,d;s._RF.push({},"4a384pMnwVCl4GzMf1D4cs0","cameraCtrl",void 0);var v=r.ccclass,g=r.property;t("CameraCtrl",(u=v("CameraCtrl"),f=g(n),C=g(n),u((x=i((y=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,a(i,"Player",x,o(i)),a(i,"Map",d,o(i)),i.maxCamPosX=void 0,i.maxCamPosY=void 0,i.followOffset=l(100,300),i}e(i,t);var s=i.prototype;return s.start=function(){this.maxCamPosX=(this.Map.getComponent(m).contentSize.width*this.Map.scale.x-p.getVisibleSize().width)/2,this.maxCamPosY=(this.Map.getComponent(m).contentSize.height*this.Map.scale.y-p.getVisibleSize().height)/2},s.update=function(t){var i=this.Player.position.x+this.followOffset.x,e=this.Player.position.y+this.followOffset.y,a=this.node.position.x,o=this.node.position.y;i>this.maxCamPosX&&(i=this.maxCamPosX),i<-this.maxCamPosX&&(i=-this.maxCamPosX),e>this.maxCamPosY&&(e=this.maxCamPosY),e<-this.maxCamPosY&&(e=-this.maxCamPosY);var s=h(a,i,2*t),r=h(o,e,2*t);this.node.setPosition(s,r)},i}(c)).prototype,"Player",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=i(y.prototype,"Map",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=y))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/conf.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,r,c;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,c=t.Component}],execute:function(){var e,u;o._RF.push({},"78470d6FLpGP7U/oyOr7sI7","conf",void 0);var s=r.ccclass;r.property,t("conf",s("conf")(((u=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var r=o.prototype;return r.start=function(){},r.update=function(t){},o}(c)).TOOLS=[],e=u))||e);o._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/dialogue.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,a,o,s,l,r,u,c,h,x,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,l=t.Sprite,r=t.Label,u=t.Node,c=t.Input,h=t.resources,x=t.SpriteFrame,p=t.Component}],execute:function(){var T,d,g,b,f,m,v,L,w,y,D;o._RF.push({},"b89e9ifUONK6b1AnET1eEzT","dialogue",void 0);var I=s.ccclass,S=s.property;t("dialogue",(T=I("dialogue"),d=S(l),g=S(r),b=S(r),f=S(u),T((L=e((v=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"picSprite",L,a(e)),n(e,"nameLabel",w,a(e)),n(e,"textLabel",y,a(e)),n(e,"Touch",D,a(e)),e._messages=[],e.textIndex=0,e.totalTime=void 0,e.textEnd=void 0,e.nowText=void 0,e.displayALL=!1,e.lastClickTime=0,e.doubleClickInterval=.3,e}i(e,t);var o=e.prototype;return o.onLoad=function(){this.Touch.on(c.EventType.TOUCH_START,this.onTouchStart,this)},o.init=function(t){this.nowText=null,this.textEnd=!0,this.totalTime=0,this.textIndex=0,this._messages=t,this.node.active=!0,this.nextTextData()},o.nextTextData=function(){if(this.textEnd)if(this.textEnd=!1,this.textIndex<this._messages.length){var t=this._messages[this.textIndex];this.setTextData(t),this.textIndex++}else this.closeDialog()},o.setTextData=function(t){var e=this;this.nameLabel.string=t.name,this.textLabel.string="",this.nowText=t.content,h.load(t.url,x,(function(t,i){e.picSprite.getComponent(l).spriteFrame=i}))},o.closeDialog=function(){this.node.active=!1},o.onTouchStart=function(t){var e=Date.now()/1e3;e-this.lastClickTime<=this.doubleClickInterval&&(this.textLabel.string=this.nowText),this.lastClickTime=e,this.nextTextData()},o.update=function(t){this.nowText&&(this.totalTime+=t,this.totalTime>=.03&&(this.textLabel.string.length<this.nowText.length?this.textLabel.string=this.nowText.slice(0,this.textLabel.string.length+1):(this.textEnd=!0,this.nowText=null),this.totalTime=0))},e}(p)).prototype,"picSprite",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(v.prototype,"nameLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(v.prototype,"textLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(v.prototype,"Touch",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/gameRanking.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,a,o,l,c,u,s,g,p,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,c=e.Prefab,u=e.SpriteFrame,s=e.Label,g=e.instantiate,p=e.Sprite,m=e.Component}],execute:function(){var f,b,h,y,d,k,L,C,v,w,I,z,N;a._RF.push({},"b2424T7N/NK34dCMM2vxSvA","gameRanking",void 0);var R=o.ccclass,_=o.property;e("gameRanking",(f=R("gameRanking"),b=_(l),h=_(c),y=_(l),d=_([u]),k=_(s),f((v=t((C=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"content",v,i(t)),r(t,"gameItem",w,i(t)),r(t,"scrollGameList",I,i(t)),r(t,"rankIcons",z,i(t)),r(t,"Lable",N,i(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.getGameList()},a.getGameList=function(){var e=this;fetch("https://sterling-gecko-genuinely.ngrok-free.app/",{method:"GET",headers:{"Content-Type":"text/plain","ngrok-skip-browser-warning":"69420"}}).then((function(e){return e.text()})).then((function(t){console.log(t),e.Lable.string=t})).catch((function(e){console.error("Fetch error:",e)}))},a.gameRankingList=function(e,t){var n=g(this.gameItem);(n.getChildByName("rankLabel").getComponent(s).string=t.toString(),n.getChildByName("nameLabel").getComponent(s).string=e.player_name,n.getChildByName("timeLabel").getComponent(s).string=e.total_duration,t<=4)&&(n.getChildByName("rankIcon").getComponent(p).spriteFrame=this.rankIcons[t-1]);this.content.addChild(n)},a.start=function(){},a.update=function(e){},t}(m)).prototype,"content",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(C.prototype,"gameItem",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(C.prototype,"scrollGameList",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(C.prototype,"rankIcons",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=t(C.prototype,"Lable",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=C))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./hero.ts"],(function(e){var t,a,n,o,r,l,i;return{setters:[function(e){t=e.inheritsLoose,a=e.extends},function(e){n=e.cclegacy,o=e._decorator,r=e.director,l=e.Component},function(e){i=e.CharacterMode}],execute:function(){var d;n._RF.push({},"623d6FuyydHPbh990xcy1bj","GlobalData",void 0);var s=o.ccclass;o.property,e("GlobalData",s("GlobalData")(d=function(e){function n(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).data={device_model:null,player_name:"蘇",level1_deaths:0,level1_duration:0,bandit_defeated:!1,level2_deaths:0,level2_duration:0,mummy_defeated:!1,level3_duration:0,khonsu_defeated:!1,playerHP_remaining:0,bossHP_remaining:0,weapon_used:i.normal,total_duration:0},t}t(n,e);var o=n.prototype;return o.start=function(){r.addPersistRootNode(this.node)},o.setGameData=function(e){this.data=a({},this.data,e)},o.getGameData=function(){return this.data},n}(l))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/hero.ts",["./rollupPluginModLoBabelHelpers.js","cc","./arrow.ts"],(function(t){var e,i,o,s,n,h,a,r,l,c,u,d,p,g,m,b,f,C,k,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,h=t._decorator,a=t.CCFloat,r=t.CCInteger,l=t.AudioClip,c=t.Node,u=t.Prefab,d=t.ProgressBar,p=t.Label,g=t.AudioSource,m=t.Input,b=t.Animation,f=t.instantiate,C=t.Color,k=t.Component},function(t){T=t.arrow}],execute:function(){var w,S,y,R,P,A,F,E,v,L,I,H,D,O,x,z,W,_,B,N,M,U,Y,j,G,J,K,Z,q,Q,V;n._RF.push({},"ec21d7yCuhCS7OIZancP4KJ","hero",void 0);var X=h.ccclass,$=h.property,tt=t("CharacterMode",function(t){return t[t.normal=0]="normal",t[t.punch=1]="punch",t[t.sword=2]="sword",t[t.bow=3]="bow",t}({})),et=t("CharacterState",function(t){return t[t.isWalkingLeft=0]="isWalkingLeft",t[t.isWalkingRight=1]="isWalkingRight",t[t.isRunningLeft=2]="isRunningLeft",t[t.isRunningRight=3]="isRunningRight",t[t.isAttacking=4]="isAttacking",t[t.isHurt=5]="isHurt",t[t.isIdle=6]="isIdle",t[t.isDie=7]="isDie",t[t.isRollingLeft=8]="isRollingLeft",t[t.isRollingRight=9]="isRollingRight",t}({}));t("hero",(w=X("hero"),S=$({type:a}),y=$({type:r}),R=$({type:l}),P=$({type:l}),A=$({type:l}),F=$({type:l}),E=$({type:l}),v=$({type:a}),L=$(c),I=$(c),H=$(c),D=$(u),O=$(d),x=$(p),w((_=e((W=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),h=0;h<i;h++)n[h]=arguments[h];return e=t.call.apply(t,[this].concat(n))||this,o(e,"speed",_,s(e)),o(e,"hp",B,s(e)),o(e,"hit",N,s(e)),o(e,"arrowShot",M,s(e)),o(e,"roll",U,s(e)),o(e,"slide",Y,s(e)),o(e,"swing",j,s(e)),o(e,"attackPower",G,s(e)),o(e,"leftTouch",J,s(e)),o(e,"rightTouch",K,s(e)),o(e,"attackTouch",Z,s(e)),o(e,"arrowPrefab",q,s(e)),o(e,"healthBar",Q,s(e)),o(e,"healthLabel",V,s(e)),e.soundEffect=new g,e.footStep=new g,e.Combo=0,e.heroMode=tt.normal,e.heroState=et.isIdle,e.isHurt=!1,e.isAttacking=!1,e.reciveDamage=void 0,e.lastTouchTimeRight=0,e.lastTouchTimeLeft=0,e.doubleTouchInterval=.3,e.rollingCD=!1,e.attackCooldown=!1,e.isInvincible=!1,e.arrow=void 0,e.rollingCallback=void 0,e}i(e,t);var n=e.prototype;return n.start=function(){this.leftTouch.on(m.EventType.TOUCH_START,this.onTouchStartLeft,this),this.rightTouch.on(m.EventType.TOUCH_START,this.onTouchStartRight,this),this.leftTouch.on(m.EventType.TOUCH_END,this.onTouchEndLeft,this),this.rightTouch.on(m.EventType.TOUCH_END,this.onTouchEndRight,this),this.leftTouch.on(m.EventType.TOUCH_CANCEL,this.onTouchEndLeft,this),this.rightTouch.on(m.EventType.TOUCH_CANCEL,this.onTouchEndRight,this),this.attackTouch.on(m.EventType.TOUCH_START,this.onTouchStartAttack,this),this.attackTouch.on(m.EventType.TOUCH_END,this.onTouchEndAttack,this),this.attackTouch.on(m.EventType.TOUCH_CANCEL,this.onTouchEndAttack,this),this.footStep=this.node.getComponent(g),this.node.getComponent(b).on(b.EventType.FINISHED,this.onAnimationFINISHED,this),this.node.getComponent(b).on(b.EventType.PLAY,this.onAnimationPLAY,this),this.node.getComponent(b).on(b.EventType.STOP,this.onAnimationSTOP,this),this.rollingCallback=function(){this.rollingCD=!1}.bind(this)},n.onTouchStartRight=function(t){if(!this.isHurt){var e=Date.now()/1e3;this.heroMode!=tt.normal&&e-this.lastTouchTimeRight<this.doubleTouchInterval&&!this.rollingCD?this.heroState=et.isRollingRight:this.heroState=et.isWalkingRight,this.lastTouchTimeRight=e}},n.onTouchStartLeft=function(t){if(!this.isHurt){var e=Date.now()/1e3;this.heroMode!=tt.normal&&e-this.lastTouchTimeLeft<this.doubleTouchInterval&&!this.rollingCD?this.heroState=et.isRollingLeft:this.heroState=et.isWalkingLeft,this.lastTouchTimeLeft=e}},n.onTouchEndLeft=function(t){this.heroState=et.isIdle},n.onTouchEndRight=function(t){this.heroState=et.isIdle},n.onTouchStartAttack=function(t){this.isHurt||this.attackCooldown||(this.heroState=et.isAttacking)},n.onTouchEndAttack=function(t){this.heroState=et.isIdle},n.onAnimationFINISHED=function(t,e){"punch1"!==e.name&&"punch2"!==e.name&&"punch3"!==e.name&&"punch4"!==e.name&&"punch5"!==e.name&&"punch6"!==e.name||(this.Combo=(this.Combo+1)%6,this.isAttacking=!1,0===this.Combo&&(this.isAttacking=!1,this.heroState=et.isIdle)),"slash1"!==e.name&&"slash2"!==e.name&&"slash3"!==e.name&&"slash4"!==e.name&&"slash5"!==e.name&&"slash6"!==e.name||(this.Combo=(this.Combo+1)%6,this.isAttacking=!1,0===this.Combo&&(this.isAttacking=!1,this.heroState=et.isIdle)),"die"===e.name&&this.hp>0&&(this.isHurt=!1,this.hp-=this.reciveDamage,this.heroState=et.isIdle),"die"===e.name&&this.hp<=0&&(this.isHurt=!0,this.heroState=null),"shootArrow"===e.name&&(this.soundEffect.playOneShot(this.arrowShot),this.shootArrow())},n.onAnimationPLAY=function(t,e){var i=this;"punch1"!==e.name&&"punch2"!==e.name&&"punch3"!==e.name&&"punch4"!==e.name&&"punch5"!==e.name&&"punch6"!==e.name||(this.soundEffect.playOneShot(this.hit),this.isAttacking=!0),"slash1"!==e.name&&"slash2"!==e.name&&"slash3"!==e.name&&"slash4"!==e.name&&"slash5"!==e.name&&"slash6"!==e.name||(this.soundEffect.playOneShot(this.swing),this.isAttacking=!0),"die"===e.name&&(this.footStep.stop(),this.isHurt=!0),"run"!==e.name&&"walking"!==e.name&&"swordRun"!==e.name||this.footStep.play(),"roll"===e.name&&(this.rollingCD=!0,this.soundEffect.playOneShot(this.roll),this.scheduleOnce(this.rollingCallback,2),this.isInvincible=!0,this.scheduleOnce((function(){i.isInvincible=!1}),1)),"slide"===e.name&&(this.rollingCD=!0,this.soundEffect.playOneShot(this.slide),this.scheduleOnce(this.rollingCallback,2),this.isInvincible=!0,this.scheduleOnce((function(){i.isInvincible=!1}),1))},n.onAnimationSTOP=function(t,e){"run"!==e.name&&"walking"!==e.name&&"swordRun"!==e.name||this.footStep.stop(),"roll"===e.name&&(this.heroState=et.isIdle),"slide"===e.name&&(this.heroState=et.isIdle)},n.shootArrow=function(){this.arrow=f(this.arrowPrefab),this.arrow.parent=this.node.parent;var t=this.node.scale.x>0?1:-1;this.node.scale.x>0?this.arrow.setPosition(this.node.position.x+110,this.node.position.y+74):this.arrow.setPosition(this.node.position.x-110,this.node.position.y+74),this.arrow.getComponent(T).init(t,this.node.position)},n.getArrowPosition=function(){if(this.arrow&&this.arrow.position)return this.arrow.position.clone()},n.heroTakeDamage=function(t){this.reciveDamage=t},n.updateHealthBar=function(){this.healthLabel.string=this.hp.toString(),this.healthBar.getComponent(d).progress=this.hp/20,this.healthBar.getComponent(d).progress>.7?this.healthBar.getComponent(d).barSprite.color=C.GREEN:this.healthBar.getComponent(d).progress>.5?this.healthBar.getComponent(d).barSprite.color=C.YELLOW:this.healthBar.getComponent(d).barSprite.color=C.RED},n.update=function(t){if(this.updateHealthBar(),!this.isHurt&&!this.isAttacking){switch(this.heroMode==tt.punch?this.attackPower=1:(this.heroMode==tt.sword||this.heroMode==tt.bow)&&(this.attackPower=1.5),this.heroMode){case tt.normal:switch(this.attackTouch.active=!1,this.heroState){case et.isWalkingRight:this.getComponent(b).crossFade("walking",.1),this.node.setPosition(this.node.getPosition().x+=this.speed*t,this.node.position.y),this.node.setScale(1,1);break;case et.isWalkingLeft:this.getComponent(b).crossFade("walking",.1),this.node.setPosition(this.node.getPosition().x-=this.speed*t,this.node.position.y),this.node.setScale(-1,1);break;case et.isIdle:this.getComponent(b).crossFade("idle",.1);break;case et.isDie:this.getComponent(b).crossFade("die",.1)}break;case tt.punch:switch(this.heroState){case et.isAttacking:0===this.Combo?this.getComponent(b).crossFade("punch1",.1):1===this.Combo?this.getComponent(b).crossFade("punch2",.1):2===this.Combo?this.getComponent(b).crossFade("punch3",.1):3===this.Combo?this.getComponent(b).crossFade("punch4",.1):4===this.Combo?this.getComponent(b).crossFade("punch5",.1):5===this.Combo&&this.getComponent(b).crossFade("punch6",.1);break;case et.isWalkingRight:this.getComponent(b).crossFade("run",.1),this.node.setPosition(this.node.getPosition().x+=this.speed*t,this.node.position.y),this.node.setScale(1,1);break;case et.isWalkingLeft:this.getComponent(b).crossFade("run",.1),this.node.setPosition(this.node.getPosition().x-=this.speed*t,this.node.position.y),this.node.setScale(-1,1);break;case et.isRollingRight:this.getComponent(b).crossFade("slide",.1),this.node.setPosition(this.node.getPosition().x+=10,this.node.position.y),this.node.setScale(1,1);break;case et.isRollingLeft:this.getComponent(b).crossFade("roll",.1),this.node.setPosition(this.node.getPosition().x-=10,this.node.position.y),this.node.setScale(-1,1);break;case et.isIdle:this.getComponent(b).crossFade("idle",.1);break;case et.isHurt:this.getComponent(b).crossFade("die",.1)}break;case tt.sword:switch(this.heroState){case et.isAttacking:0===this.Combo?this.getComponent(b).crossFade("slash1",.1):1===this.Combo?this.getComponent(b).crossFade("slash2",.1):2===this.Combo?this.getComponent(b).crossFade("slash3",.1):3===this.Combo?this.getComponent(b).crossFade("slash4",.1):4===this.Combo?this.getComponent(b).crossFade("slash5",.1):5===this.Combo&&this.getComponent(b).crossFade("slash6",.1);break;case et.isWalkingRight:this.getComponent(b).crossFade("swordRun",.1),this.node.setPosition(this.node.getPosition().x+=this.speed*t,this.node.position.y),this.node.setScale(1,1);break;case et.isWalkingLeft:this.getComponent(b).crossFade("swordRun",.1),this.node.setPosition(this.node.getPosition().x-=this.speed*t,this.node.position.y),this.node.setScale(-1,1);break;case et.isRollingRight:this.getComponent(b).crossFade("slide",.1),this.node.setPosition(this.node.getPosition().x+=10,this.node.position.y),this.node.setScale(1,1);break;case et.isRollingLeft:this.getComponent(b).crossFade("roll",.1),this.node.setPosition(this.node.getPosition().x-=10,this.node.position.y),this.node.setScale(-1,1);break;case et.isIdle:this.getComponent(b).crossFade("swordIdle",.1);break;case et.isHurt:this.getComponent(b).crossFade("die",.1)}break;case tt.bow:switch(this.heroState){case et.isAttacking:this.getComponent(b).crossFade("shootArrow",.1);break;case et.isWalkingRight:this.getComponent(b).crossFade("run",.1),this.node.setPosition(this.node.getPosition().x+=this.speed*t,this.node.position.y),this.node.setScale(1,1);break;case et.isWalkingLeft:this.getComponent(b).crossFade("run",.1),this.node.setPosition(this.node.getPosition().x-=this.speed*t,this.node.position.y),this.node.setScale(-1,1);break;case et.isRollingRight:this.getComponent(b).crossFade("slide",.1),this.node.setPosition(this.node.getPosition().x+=10,this.node.position.y),this.node.setScale(1,1);break;case et.isRollingLeft:this.getComponent(b).crossFade("roll",.1),this.node.setPosition(this.node.getPosition().x-=10,this.node.position.y),this.node.setScale(-1,1);break;case et.isIdle:this.getComponent(b).crossFade("idle",.1);break;case et.isHurt:this.getComponent(b).crossFade("die",.1)}}this.heroState!==et.isAttacking&&(this.Combo=0)}},e}(k)).prototype,"speed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=e(W.prototype,"hp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=e(W.prototype,"hit",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(W.prototype,"arrowShot",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(W.prototype,"roll",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(W.prototype,"slide",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(W.prototype,"swing",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(W.prototype,"attackPower",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=e(W.prototype,"leftTouch",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(W.prototype,"rightTouch",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(W.prototype,"attackTouch",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(W.prototype,"arrowPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(W.prototype,"healthBar",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(W.prototype,"healthLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=W))||z));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./GlobalData.ts","./START.ts","./TAKE0.ts","./TAKE1.ts","./TAKE2.ts","./TAKE3.ts","./TAKE4.ts","./TAKE5.ts","./TAKE6.ts","./TAKE7.ts","./UI.ts","./arrow.ts","./bag.ts","./bandit.ts","./boss.ts","./cameraCtrl.ts","./conf.ts","./dialogue.ts","./gameRanking.ts","./hero.ts","./mummy.ts","./priest.ts","./sarcophagus.ts","./spell.ts","./tool.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/mummy.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,a,s,n,o,r,m,l,h,c,u,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,r=t.CCFloat,m=t.Node,l=t.ProgressBar,h=t.Animation,c=t.Vec3,u=t.Color,d=t.Component}],execute:function(){var p,y,g,k,b,f,C,D,v,H,S,A,I;n._RF.push({},"0f939lntExFRaWMHASbWS+C","mummy",void 0);var F=o.ccclass,P=o.property,R=t("State",function(t){return t[t.isWalkingRight=0]="isWalkingRight",t[t.isWalkingLeft=1]="isWalkingLeft",t[t.isAttacking=2]="isAttacking",t[t.isIdle=3]="isIdle",t[t.isDie=4]="isDie",t[t.isHurt=5]="isHurt",t[t.isRelive=6]="isRelive",t[t.isHeal=7]="isHeal",t}({}));t("mummy",(p=F("mummy"),y=P({type:r}),g=P({type:r}),k=P({type:r}),b=P(m),f=P(l),p((v=e((D=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,a(e,"hp",v,s(e)),a(e,"speed",H,s(e)),a(e,"attackPower",S,s(e)),a(e,"heroNode",A,s(e)),a(e,"healthBar",I,s(e)),e.mummyState=R.isIdle,e.CD=!1,e.healCD=!1,e.callback=void 0,e.attackCallback=void 0,e.healCallback=void 0,e.isAttacking=!1,e.isDead=!1,e.reciveDamage=void 0,e.isHeal=void 0,e}i(e,t);var n=e.prototype;return n.start=function(){var t=this.node.getComponent(h);t.on(h.EventType.FINISHED,this.onAnimationFINISHED,this),t.on(h.EventType.PLAY,this.onAnimationPLAY,this),this.callback=function(){var t=this.node.getPosition(),e=this.heroNode.getPosition(),i=c.distance(t,e);if(this.hp<=15&&!this.healCD)this.mummyState=R.isHeal;else if(i<=150&&!this.CD)this.mummyState=R.isAttacking;else if(i<=150&&this.CD)this.mummyState=R.isIdle;else if(i<=3e3){e.subtract(t).x<0?this.mummyState=R.isWalkingLeft:this.mummyState=R.isWalkingRight}else this.mummyState=R.isIdle}.bind(this),this.attackCallback=function(){this.CD=!1}.bind(this),this.healCallback=function(){this.healCD=!1}.bind(this)},n.updateHealthBar=function(){this.healthBar.getComponent(l).progress=this.hp/40,this.healthBar.getComponent(l).progress>.7?this.healthBar.getComponent(l).barSprite.color=u.GREEN:this.healthBar.getComponent(l).progress>.5?this.healthBar.getComponent(l).barSprite.color=u.YELLOW:this.healthBar.getComponent(l).barSprite.color=u.RED},n.onAnimationFINISHED=function(t,e){var i=this;"mummyAttack"===e.name?(this.isAttacking=!1,this.CD=!0,this.scheduleOnce(this.attackCallback,3),this.mummyState=R.isIdle):"mummyDead"===e.name?(this.scheduleOnce((function(){i.healthBar.node.active=!1}),2),this.mummyState=null):"mummyRelive"===e.name||"mummyHurt"===e.name?this.mummyState=R.isIdle:"mummyHeal"===e.name&&(this.scheduleOnce(this.healCallback,10),this.hp+=5,this.isHeal=!1)},n.onAnimationPLAY=function(t,e){"mummyHurt"===e.name?this.hp-=this.reciveDamage:"mummyAttack"===e.name?this.isAttacking=!0:"mummyHeal"===e.name&&(this.healCD=!0,this.isHeal=!0)},n.mummyTakeDamage=function(t){this.reciveDamage=t},n.update=function(t){if(this.updateHealthBar(),!(this.isAttacking||this.isDead||this.isHeal)){var e=this.node.getComponent(h);switch(this.mummyState){case R.isWalkingRight:e.crossFade("mummyWalk",.1),this.node.setPosition(this.node.getPosition().x+this.speed*t,this.node.position.y),this.node.setScale(1,1);break;case R.isWalkingLeft:e.crossFade("mummyWalk",.1),this.node.setPosition(this.node.getPosition().x-this.speed*t,this.node.position.y),this.node.setScale(-1,1);break;case R.isAttacking:this.isAttacking||e.crossFade("mummyAttack",.1);break;case R.isIdle:e.crossFade("mummyIdle",.1);break;case R.isHurt:e.crossFade("mummyHurt",.1);break;case R.isHeal:e.crossFade("mummyHeal",.1);break;case R.isRelive:e.crossFade("mummyRelive",.1);break;case R.isDie:this.isDead=!0,this.node.setScale(-1,1),e.play("mummyDead")}}},e}(d)).prototype,"hp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=e(D.prototype,"speed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=e(D.prototype,"attackPower",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3.5}}),A=e(D.prototype,"heroNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(D.prototype,"healthBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=D))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/priest.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,s,n,o,a,r,l,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,r=t.CCFloat,l=t.Animation,c=t.Component}],execute:function(){var h,p,d,g,u;o._RF.push({},"4f680pTO+9IaaI4HzMGg1Oi","priest",void 0);var k=a.ccclass,f=a.property,m=t("priestState",function(t){return t[t.isWalkingRight=0]="isWalkingRight",t[t.isWalkingLeft=1]="isWalkingLeft",t[t.isIdle=2]="isIdle",t[t.isTalk=3]="isTalk",t}({}));t("priest",(h=k("priest"),p=f({type:r}),h((u=i((g=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,s(i,"speed",u,n(i)),i.priestState=m.isWalkingLeft,i.callback=void 0,i}e(i,t);var o=i.prototype;return o.start=function(){this.callback=function(){this.randomMove=Math.floor(3*Math.random()),0==this.randomMove&&(this.priestState=m.isIdle),1==this.randomMove&&(this.priestState=m.isWalkingLeft),2==this.randomMove&&(this.priestState=m.isWalkingRight)},this.schedule(this.callback,5)},o.update=function(t){switch(this.priestState){case m.isWalkingRight:this.getComponent(l).crossFade("priestWalk"),this.node.setPosition(this.node.getPosition().x+=this.speed*t,this.node.position.y),this.node.setScale(1,1);break;case m.isWalkingLeft:this.getComponent(l).crossFade("priestWalk"),this.node.setPosition(this.node.getPosition().x-=this.speed*t,this.node.position.y),this.node.setScale(-1,1);break;case m.isIdle:this.getComponent(l).crossFade("priestIdle");break;case m.isTalk:this.getComponent(l).crossFade("priestIdle"),this.unschedule(this.callback)}this.node.getPosition().x>=500?this.priestState=m.isWalkingLeft:this.node.getPosition().x<=-300&&(this.priestState=m.isWalkingRight)},i}(c)).prototype,"speed",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=g))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/sarcophagus.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,a,r,o,i,s,n,h,c,p,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,n=t.CCFloat,h=t.ProgressBar,c=t.Animation,p=t.Color,u=t.Component}],execute:function(){var l,g,m,f,d,D,v;i._RF.push({},"bedf6PG/rFLUqLR07bFR/Ij","sarcophagus",void 0);var y=s.ccclass,b=s.property,B=t("sarcophagusState",function(t){return t[t.isHurt=0]="isHurt",t[t.isDie=1]="isDie",t}({}));t("sarcophagus",(l=y("sarcophagus"),g=b({type:n}),m=b(h),l((D=e((d=function(t){function e(){for(var e,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,r(e,"hp",D,o(e)),r(e,"healthBar",v,o(e)),e.sarcophagusState=void 0,e.isDead=!1,e.reciveDamage=void 0,e}a(e,t);var i=e.prototype;return i.start=function(){var t=this.node.getComponent(c);t.on(c.EventType.FINISHED,this.onAnimationFINISHED,this),t.on(c.EventType.PLAY,this.onAnimationPLAY,this)},i.onAnimationFINISHED=function(t,e){"sarcophagusHurt"===e.name&&(this.sarcophagusState=null),"sarcophagusDestory"===e.name&&(this.node.active=!1)},i.onAnimationPLAY=function(t,e){"sarcophagusHurt"===e.name&&(this.hp-=this.reciveDamage)},i.updateHealthBar=function(){this.healthBar.getComponent(h).progress=this.hp/10,this.healthBar.getComponent(h).progress>.7?this.healthBar.getComponent(h).barSprite.color=p.GREEN:this.healthBar.getComponent(h).progress>.5?this.healthBar.getComponent(h).barSprite.color=p.YELLOW:this.healthBar.getComponent(h).barSprite.color=p.RED},i.sarcophagusTakeDamage=function(t){this.reciveDamage=t},i.update=function(t){if(this.updateHealthBar(),!this.isDead){var e=this.node.getComponent(c);switch(this.sarcophagusState){case B.isHurt:e.crossFade("sarcophagusHurt",.1);break;case B.isDie:this.isDead=!0,e.crossFade("sarcophagusDestory")}}},e}(u)).prototype,"hp",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=e(d.prototype,"healthBar",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/spell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,r,s,c,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,c=e.Vec3,a=e.Animation,l=e.Component}],execute:function(){var p,u,h;r._RF.push({},"7f1c3MtsXZMgaPS1rjXOhQb","spell",void 0);var d=s.ccclass,f=s.property;e("spell",d("spell")((h=t((u=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"speed",h,o(t)),t.direction=1,t.origin=new c,t}n(t,e);var r=t.prototype;return r.start=function(){this.node.getComponent(a).on(a.EventType.FINISHED,this.onAnimationFINISHED,this)},r.onAnimationFINISHED=function(e,t){"spell"===t.name&&this.node.destroy()},r.init=function(e){this.origin.set(e)},r.update=function(e){this.node.setPosition(this.origin),this.node.getComponent(a).crossFade("spell")},t}(l)).prototype,"speed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),p=u))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/START.ts",["./rollupPluginModLoBabelHelpers.js","cc","./conf.ts","./GlobalData.ts","./hero.ts"],(function(e){var t,o,n,i,a,l,r,u,c,s,d,p,h,T,f,y,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,r=e.Node,u=e.EditBox,c=e.sys,s=e.resources,d=e.director,p=e.find,h=e.Input,T=e.Component},function(e){f=e.conf},function(e){y=e.GlobalData},function(e){_=e.CharacterMode}],execute:function(){var b,g,m,v,S,x,D,A,R;a._RF.push({},"3d0f9WsdzlFSbHXMXMji3dT","START",void 0);var w=l.ccclass,E=l.property;e("START",(b=w("START"),g=E(r),m=E(r),v=E(u),b((D=t((x=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,n(t,"playTouch",D,i(t)),n(t,"exitTouch",A,i(t)),n(t,"editBox",R,i(t)),t.savedState=null,t.globalNode=void 0,t}o(t,e);var a=t.prototype;return a.start=function(){var e=c.os;console.log(e),s.loadDir("Dialog/role"),s.loadDir("tools"),d.preloadScene("TAKE0"),this.globalNode=p("GlobalNode").getComponent(y),this.globalNode.setGameData({device_model:e,player_name:"蘇",level1_deaths:0,level1_duration:0,bandit_defeated:!1,level2_deaths:0,level2_duration:0,mummy_defeated:!1,level3_duration:0,khonsu_defeated:!1,playerHP_remaining:0,bossHP_remaining:0,weapon_used:_.normal,total_duration:0}),this.playTouch.on(h.EventType.TOUCH_START,this.onTouchStartPlay,this),this.exitTouch.on(h.EventType.TOUCH_START,this.onTouchStartExit,this)},a.onTouchStartPlay=function(e){f.TOOLS.length=0,d.loadScene("TAKE0")},a.inputName=function(){this.globalNode.setGameData({player_name:this.editBox.string})},a.onTouchStartExit=function(e){window.close()},a.update=function(e){},t}(T)).prototype,"playTouch",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(x.prototype,"exitTouch",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(x.prototype,"editBox",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=x))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/TAKE0.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dialogue.ts","./GlobalData.ts"],(function(e){var t,n,o,a,i,l,r,c,s,u,p,d,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,r=e.Node,c=e.AudioSource,s=e.director,u=e.find,p=e.Component},function(e){d=e.dialogue},function(e){g=e.GlobalData}],execute:function(){var h,m,D,f,b;i._RF.push({},"647b0pEZzJDFK+u71/l0bxU","TAKE0",void 0);var y=l.ccclass,S=l.property;e("TAKE0",(h=y("TAKE0"),m=S(r),h((b=t((f=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,o(t,"DialogNode",b,a(t)),t.dialogScript=void 0,t.changeScene=!1,t.startTime=null,t.playerName=void 0,t.BGM=new c,t.globalNode=void 0,t}n(t,e);var i=t.prototype;return i.start=function(){this.startTime=new Date,s.preloadScene("TAKE1"),this.BGM=this.node.getComponent(c),this.dialogScript=this.DialogNode.getComponent(d),this.globalNode=u("GlobalNode").getComponent(g),this.playerName=this.globalNode.getGameData().player_name,this.BGM.play(),this.DialogNode.active=!0,this.dialogScript.init([{name:"旁白",content:"（耳邊傳來新聞斷斷續續聲音）",url:null},{name:"新聞主播",content:"提巴斯肯研究中心近期發現月球逐漸偏離軌道...",url:"Dialog/role/woman/spriteFrame"},{name:"旁白",content:"（悉悉簌簌）（電視沒訊號的聲音）",url:null},{name:"新聞主播",content:"從畫面上可以看到，許多低海拔國家恐遭海水吞沒...",url:"Dialog/role/woman/spriteFrame"},{name:"旁白",content:"（悉悉簌簌...）（電視沒訊號的聲音）（簌------）（電視關閉的聲音）",url:null},{name:this.playerName,content:"（緩緩地睜開雙眼，打了哈欠，隨後便刷牙洗臉去了...）",url:"Dialog/role/hero/spriteFrame"}])},i.endScene=function(){var e=new Date,t=Math.round((e.getTime()-this.startTime.getTime())/1e3),n=u("GlobalNode").getComponent(g),o=n.getGameData().total_duration+t;n.setGameData({total_duration:o}),console.log(n.getGameData())},i.update=function(e){"（悉悉簌簌...）（電視沒訊號的聲音）（簌------）（電視關閉的聲音）"===this.dialogScript.textLabel.string&&this.BGM.pause(),"（緩緩地睜開雙眼，打了哈欠，隨後便刷牙洗臉去了...）"!==this.dialogScript.textLabel.string||this.changeScene||(this.changeScene=!0,this.scheduleOnce((function(){s.loadScene("TAKE1"),this.endScene()}),3))},t}(p)).prototype,"DialogNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=f))||D));i._RF.pop()}}}));

System.register("chunks:///_virtual/TAKE1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dialogue.ts","./conf.ts","./hero.ts","./GlobalData.ts"],(function(e){var t,o,i,n,a,r,l,s,h,c,d,p,u,m,g,b,N,f,y,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,s=e.AudioClip,h=e.AudioSource,c=e.director,d=e.find,p=e.Animation,u=e.Input,m=e.Vec3,g=e.Component},function(e){b=e.dialogue},function(e){N=e.conf},function(e){f=e.hero,y=e.CharacterState},function(e){S=e.GlobalData}],execute:function(){var A,T,v,D,P,x,I,E,C,F,O,w,L;a._RF.push({},"f1dbfQL1btJHZ0BZ19kL4ZZ","TAKE1",void 0);var _=r.ccclass,U=r.property;e("TAKE1",(A=_("TAKE1"),T=U(l),v=U(l),D=U(l),P=U(l),x=U({type:s}),A((C=t((E=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"UINode",C,n(t)),i(t,"DialogNode",F,n(t)),i(t,"heroNode",O,n(t)),i(t,"boxNode",w,n(t)),i(t,"boxOpen",L,n(t)),t.heroPos=void 0,t.heroScript=void 0,t.dialogScript=void 0,t.boxPos=void 0,t.distance=void 0,t.boxAnimationPlayed=!1,t.dieAnimationPlayed=!1,t.dailogPlayed=!1,t.playerName=void 0,t.BoxOpen=new h,t.globalNode=void 0,t.startTime=null,t}o(t,e);var a=t.prototype;return a.start=function(){this.startTime=new Date,c.preloadScene("TAKE2"),this.UINode.active=!1,this.heroScript=this.heroNode.getComponent(f),this.dialogScript=this.DialogNode.getComponent(b),this.globalNode=d("GlobalNode").getComponent(S),this.playerName=this.globalNode.getGameData().player_name,this.boxNode.getComponent(p).on(p.EventType.FINISHED,this.onAnimationFINISHED,this),this.boxNode.getComponent(p).on(p.EventType.PLAY,this.onAnimationPLAY,this),this.dialogScript.init([{name:"旁白",content:"（洗漱完後的"+this.playerName+"環顧整個房間）",url:null},{name:this.playerName,content:"亂糟糟的房間，看來得整理一下了",url:"Dialog/role/hero/spriteFrame"}])},a.onAnimationPLAY=function(e,t){"open"===t.name&&this.BoxOpen.playOneShot(this.boxOpen)},a.onAnimationFINISHED=function(e,t){"open"===t.name&&(this.boxAnimationPlayed=!0)},a.onTouchStart=function(e){this.endScene(),this.DialogNode.off(u.EventType.TOUCH_START,this.onTouchStart,this),this.heroScript.heroState=y.isDie,this.scheduleOnce((function(){c.loadScene("TAKE2")}),2)},a.endScene=function(){var e=new Date,t=Math.round((e.getTime()-this.startTime.getTime())/1e3),o=this.globalNode.getGameData().total_duration+t;this.globalNode.setGameData({total_duration:o}),console.log(this.globalNode.getGameData())},a.update=function(e){this.DialogNode.active?this.UINode.active=!1:this.UINode.active=!0,this.heroPos=this.heroNode.getPosition(),this.boxPos=this.boxNode.getPosition(),this.distance=m.distance(this.boxPos,this.heroPos),this.distance<=20&&!this.boxAnimationPlayed&&(this.boxNode.getComponent(p).crossFade("open"),this.heroScript.heroState=y.isIdle,this.heroScript.footStep.stop()),this.boxAnimationPlayed&&!this.dailogPlayed&&(this.UINode.active=!1,this.dialogScript.init([{name:this.playerName,content:"（餘光瞄到桌下有個布滿灰塵的四方型盒子，便將它搬了出來）",url:"Dialog/role/hero/spriteFrame"},{name:this.playerName,content:"（映入眼簾的是一疊四散的信件）",url:"Dialog/role/hero/spriteFrame"},{name:"系統提示",content:"獲得道具「信封」（開起背包查看）",url:"tools/mailer/spriteFrame"}]),N.TOOLS.push({name:"信封",content:"塵封已久的破爛信封（點擊使用）",url:"tools/mailer/spriteFrame"}),this.dailogPlayed=!0),this.dialogScript.textLabel.string!=="（"+this.playerName+"戴起了那個未知的吊墜，隨即感到暈頭轉向，並昏了過去）"||this.dieAnimationPlayed||(this.dieAnimationPlayed=!0,this.DialogNode.on(u.EventType.TOUCH_START,this.onTouchStart,this))},t}(g)).prototype,"UINode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(E.prototype,"DialogNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(E.prototype,"heroNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(E.prototype,"boxNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(E.prototype,"boxOpen",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=E))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/TAKE2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dialogue.ts","./GlobalData.ts"],(function(e){var t,o,a,i,n,l,r,s,c,p,u,h,d,m,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,r=e.Node,s=e.VideoPlayer,c=e.AudioSource,p=e.director,u=e.find,h=e.Input,d=e.Component},function(e){m=e.dialogue},function(e){g=e.GlobalData}],execute:function(){var y,D,T,f,N,b,v;n._RF.push({},"cb812pGk7hAzrq+ipaZbYen","TAKE2",void 0);var S=l.ccclass,A=l.property;e("TAKE2",(y=S("TAKE2"),D=A(r),T=A(s),y((b=t((N=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,a(t,"DialogNode",b,i(t)),t.dialogScript=void 0,a(t,"airplane",v,i(t)),t.BGM=new c,t.animationPlayed=!1,t.startTime=null,t.playerName=void 0,t.globalNode=void 0,t}o(t,e);var n=t.prototype;return n.onListen=function(){this.airplane.node.on(s.EventType.PAUSED,this.onVideoCompleted,this)},n.start=function(){this.startTime=new Date,p.preloadScene("TAKE3"),this.BGM=this.node.getComponent(c),this.dialogScript=this.DialogNode.getComponent(m),this.globalNode=u("GlobalNode").getComponent(g),this.playerName=this.globalNode.getGameData().player_name,this.dialogScript.init([{name:this.playerName,content:"（疑惑）這裡是...？",url:"Dialog/role/hero/spriteFrame"},{name:"未知聲音",content:"終於找到你了",url:"Dialog/role/bossUnknow/spriteFrame"},{name:this.playerName,content:"（驚恐）是誰...是誰在講話！",url:"Dialog/role/hero/spriteFrame"},{name:"未知聲音",content:"我花了上千年苦苦追尋的那條吊墜，好不容易從你父母手中找到了它，沒想到殺了他們之後，他們竟然還留有後手，把吊墜藏了起來...",url:"Dialog/role/bossUnknow/spriteFrame"},{name:this.playerName,content:"自我有記憶以來，我一直生活在孤兒院，沒想到我的父母是被殺害的，你為什麼要這麼做！（憤怒）",url:"Dialog/role/hero/spriteFrame"},{name:"未知聲音",content:"哈哈哈哈哈，這很重要嗎？末日已經開始，好好享受你最後的時光吧！",url:"Dialog/role/bossUnknow/spriteFrame"},{name:this.playerName,content:"末日？你在說什麼！",url:"Dialog/role/hero/spriteFrame"},{name:"旁白",content:"（"+this.playerName+"沒得到任何回應...便醒了過來）",url:null},{name:"旁白",content:"（為了弄清真相，"+this.playerName+"便收拾起行李，動身前往樂媞的所在處。）",url:null}])},n.onVideoCompleted=function(e){console.log("Video completed"),p.loadScene("TAKE3")},n.onTouchStart=function(e){this.BGM.stop(),this.airplane.node.active=!0,this.airplane.play(),this.DialogNode.off(h.EventType.TOUCH_START,this.onTouchStart,this),this.endScene()},n.endScene=function(){var e=new Date,t=Math.round((e.getTime()-this.startTime.getTime())/1e3),o=this.globalNode.getGameData().total_duration+t;this.globalNode.setGameData({total_duration:o}),console.log(this.globalNode.getGameData())},n.update=function(e){this.DialogNode.active=!0,this.dialogScript.textLabel.string!=="（為了弄清真相，"+this.playerName+"便收拾起行李，動身前往樂媞的所在處。）"||this.animationPlayed||(this.animationPlayed=!0,this.DialogNode.on(h.EventType.TOUCH_START,this.onTouchStart,this))},t}(d)).prototype,"DialogNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(N.prototype,"airplane",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=N))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/TAKE3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dialogue.ts","./priest.ts","./conf.ts","./GlobalData.ts"],(function(e){var t,i,o,r,a,n,l,s,c,p,h,u,m,d,g,y,N,T,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,n=e._decorator,l=e.Node,s=e.VideoPlayer,c=e.AudioSource,p=e.director,h=e.Input,u=e.find,m=e.Vec3,d=e.Component},function(e){g=e.dialogue},function(e){y=e.priest,N=e.priestState},function(e){T=e.conf},function(e){f=e.GlobalData}],execute:function(){var D,S,b,v,F,P,A,C,E,G,w,z,I,_,U;a._RF.push({},"f18bd6OtCBHXqmrz/Izbv2t","TAKE3",void 0);var K=n.ccclass,O=n.property;e("TAKE3",(D=K("TAKE3"),S=O(l),b=O(l),v=O(l),F=O(l),P=O(l),A=O(s),D((G=t((E=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a))||this,o(t,"UINode",G,r(t)),o(t,"DialogNode",w,r(t)),o(t,"heroNode",z,r(t)),o(t,"chatTouch",I,r(t)),o(t,"priestNode",_,r(t)),o(t,"pyramid",U,r(t)),t.BGM=new c,t.heroPos=void 0,t.dialogScript=void 0,t.priestScript=void 0,t.priestPos=void 0,t.distance=void 0,t.animationPlayed=!1,t.startTime=null,t.playerName=void 0,t.globalNode=void 0,t}i(t,e);var a=t.prototype;return a.onListen=function(){this.pyramid.node.on(s.EventType.PAUSED,this.onVideoCompleted,this)},a.start=function(){this.startTime=new Date,p.preloadScene("TAKE4"),this.BGM=this.node.getComponent(c),this.chatTouch.on(h.EventType.TOUCH_START,this.onTouchStartChat,this),this.UINode.active=!1,this.priestScript=this.priestNode.getComponent(y),this.dialogScript=this.DialogNode.getComponent(g),this.globalNode=u("GlobalNode").getComponent(f),this.playerName=this.globalNode.getGameData().player_name,this.dialogScript.init([{name:"旁白",content:"（循著信封上的地址，"+this.playerName+"來到了吉薩省的一處小市集）",url:null},{name:this.playerName,content:"一來到埃及，這個吊墜就不斷地蠢蠢欲動，像是感應到了什麼，算了...管不了這麼多了",url:"Dialog/role/hero/spriteFrame"},{name:"旁白",content:"（"+this.playerName+"看到前方有一位穿著祭司服裝的女性，決定上前詢問樂媞的下落）",url:null}]),localStorage.removeItem("gameStateTAKE4"),localStorage.removeItem("gameStateTAKE5")},a.onTouchStartChat=function(e){this.priestScript.priestState=N.isTalk,this.heroPos.subtract(this.priestPos).x<0?this.priestNode.setScale(-1,1):this.priestNode.setScale(1,1),this.dialogScript.init([{name:this.playerName,content:"您好，請問妳認識一位名為樂媞的女生嗎，她也是一名祭司",url:"Dialog/role/hero/spriteFrame"},{name:"樂媞",content:"我就是樂媞，請問找我有什麼事情？",url:"Dialog/role/priest/spriteFrame"},{name:"旁白",content:"（樂媞看見了"+this.playerName+"胸前佩戴的聖甲蟲吊墜，便認出了他）",url:null},{name:"樂媞",content:"你是"+this.playerName+"，對吧！這麼久不見，你都長這麼大了！",url:"Dialog/role/priest/spriteFrame"},{name:this.playerName,content:"（雖然想不起對方是誰，但總有種親切熟悉的感覺）",url:"Dialog/role/hero/spriteFrame"},{name:this.playerName,content:"對阿，好久不見了哈哈哈（敷衍），我來這裡是為了...",url:"Dialog/role/hero/spriteFrame"},{name:"旁白",content:"（"+this.playerName+"向樂媞講述了戴起吊墜後所發生的事）",url:null},{name:"樂媞",content:"成為祭司後，我研究了許多關於這條吊墜的線索，並從中拼湊出一則訊息。",url:"Dialog/role/priest/spriteFrame"},{name:this.playerName,content:"什麼訊息？",url:"Dialog/role/hero/spriteFrame"},{name:"樂媞",content:"「相傳有位身上流淌著神之血的人類，將在末日之時，驅動吊墜的力量，成為救世主」",url:"Dialog/role/priest/spriteFrame"},{name:"樂媞",content:"而你能夠與吊墜產生感應，想必你就是那個人沒錯了",url:"Dialog/role/priest/spriteFrame"},{name:this.playerName,content:"流淌著神之血的人類...我嗎？太突然了吧？那我現在該怎麼辦？",url:"Dialog/role/hero/spriteFrame"},{name:"樂媞",content:"我知道的就這麼多了，你必須前往金字塔找尋更多線索，並且在那完成你的使命，這些東西能夠引導你找到答案",url:"Dialog/role/priest/spriteFrame"},{name:"旁白",content:"（樂媞交給"+this.playerName+"一個荷魯斯之戒和卷軸）",url:null},{name:"系統提示",content:"獲得道具「荷魯斯之戒」",url:"tools/ring/spriteFrame"},{name:"系統提示",content:"獲得道具「卷軸」",url:"tools/reel/spriteFrame"},{name:this.playerName,content:"如果我做不到，世界會因我而毀滅嗎...？",url:"Dialog/role/hero/spriteFrame"},{name:"樂媞",content:"還記得小時候我常被其他小朋友欺負，你即使雙腳都在顫抖，卻還是奮不顧身的保護我，我相信這樣的你，一定可以做到的！",url:"Dialog/role/priest/spriteFrame"}]),T.TOOLS.push({name:"荷魯斯之戒",content:"佩戴者能夠獲得荷魯斯的視野，並透過戒指看到真相和隱藏的事物（點擊使用）",url:"tools/ring/spriteFrame"},{name:"卷軸",content:"據說這張卷軸是由一個古埃及祭司所製作，目的是保護金字塔中的秘密（點擊使用）",url:"tools/reel/spriteFrame"}),this.chatTouch.destroy()},a.onVideoCompleted=function(e){console.log("Video completed"),p.loadScene("TAKE4")},a.onTouchStart=function(e){this.BGM.stop(),this.pyramid.node.active=!0,this.pyramid.play(),this.DialogNode.off(h.EventType.TOUCH_START,this.onTouchStart,this),this.endScene()},a.endScene=function(){var e=new Date,t=Math.round((e.getTime()-this.startTime.getTime())/1e3),i=u("GlobalNode").getComponent(f),o=i.getGameData().total_duration+t;i.setGameData({total_duration:o}),console.log(i.getGameData())},a.update=function(e){this.chatTouch.active=!1,this.DialogNode.active?this.UINode.active=!1:this.UINode.active=!0,this.heroPos=this.heroNode.getPosition(),this.priestPos=this.priestNode.getPosition(),this.distance=m.distance(this.priestPos,this.heroPos),this.distance<=170&&(this.chatTouch.active=!0),this.dialogScript.textLabel.string!="話音剛落，聖甲蟲吊墜彷彿聽到了"+this.playerName+"的心聲，展開翅膀朝著某個方向飛去，"+this.playerName+"也跟了上去"||this.animationPlayed||(this.animationPlayed=!0,this.DialogNode.on(h.EventType.TOUCH_START,this.onTouchStart,this))},t}(d)).prototype,"UINode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(E.prototype,"DialogNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(E.prototype,"heroNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(E.prototype,"chatTouch",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(E.prototype,"priestNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(E.prototype,"pyramid",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=E))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/TAKE4.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bandit.ts","./dialogue.ts","./conf.ts","./hero.ts","./GlobalData.ts"],(function(t){var e,i,o,a,n,r,s,h,l,c,d,p,u,g,b,S,m,f,N,T,v,y,P,D,w,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,s=t.Node,h=t.Prefab,l=t.AudioSource,c=t.find,d=t.director,p=t.instantiate,u=t.Input,g=t.Vec3,b=t.tween,S=t.Sprite,m=t.Color,f=t.Component},function(t){N=t.bandit,T=t.State},function(t){v=t.dialogue},function(t){y=t.conf},function(t){P=t.hero,D=t.CharacterMode,w=t.CharacterState},function(t){C=t.GlobalData}],execute:function(){var B,G,O,I,A,H,_,k,F,K,L,z,M,E,x,R,U,W,j,J,V,q,Q,X,Y,Z,$,tt,et;n._RF.push({},"c6cca9LMjdMOratoucHb+hW","TAKE4",void 0);var it=r.ccclass,ot=r.property;t("TAKE4",(B=it("TAKE4"),G=ot(s),O=ot(h),I=ot(s),A=ot(s),H=ot(s),_=ot(s),k=ot(s),F=ot(s),K=ot(s),L=ot(s),z=ot(s),M=ot(s),E=ot(s),B((U=e((R=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,o(e,"banditNode",U,a(e)),o(e,"banditPrefab",W,a(e)),o(e,"banditContainer",j,a(e)),o(e,"heroNode",J,a(e)),o(e,"UINode",V,a(e)),o(e,"DialogNode",q,a(e)),o(e,"triggerNode",Q,a(e)),o(e,"tpNode",X,a(e)),o(e,"crate",Y,a(e)),o(e,"WhiteOverlay",Z,a(e)),o(e,"BlackOverlay",$,a(e)),o(e,"Camera",tt,a(e)),o(e,"portal",et,a(e)),e.BGM=new l,e.banditScript=void 0,e.heroScript=void 0,e.dialogScript=void 0,e.heroPos=void 0,e.banditPos=void 0,e.triggerPos=void 0,e.distance=void 0,e.triggerDistance=void 0,e.crateDistance=void 0,e.cratePos=void 0,e.tpPos=void 0,e.tpDistance=void 0,e.deaths=0,e.startTime=null,e.playerName=void 0,e.banditInstances=[],e.isFirstLoad=!1,e.isHeroDead=!1,e.isTp=!1,e.spawnBanditCD=!1,e.isBanditDead=!1,e.isKillBandit=!1,e.isGetSword=!1,e.onTrigger=!1,e.onBanditTrigger=!1,e.onAttack=!1,e.onCarteTrigger=!1,e.globalNode=void 0,e}i(e,t);var n=e.prototype;return n.start=function(){this.startTime=new Date,this.globalNode=c("GlobalNode").getComponent(C),this.playerName=this.globalNode.getGameData().player_name,d.preloadScene("TAKE5"),this.BGM=this.node.getComponent(l),this.BGM.play(),this.UINode.active=!1,this.banditScript=this.banditNode.getComponent(N),this.heroScript=this.heroNode.getComponent(P),this.dialogScript=this.DialogNode.getComponent(v),this.heroScript.heroMode=D.punch,this.loadGameState(),this.isFirstLoad||(this.dialogScript.init([{name:"旁白",content:"（在聖甲蟲的帶領下，"+this.playerName+"進入了一座神秘的金字塔）",url:null}]),this.isFirstLoad=!0),this.banditInstances.push(this.banditNode)},n.spawnBandits=function(){var t=p(this.banditPrefab);t.setPosition(160,150,0),t.getComponent("bandit").maxHp=6,this.banditContainer.addChild(t),this.banditInstances.push(t)},n.onTouchStart=function(t){this.onCarteTrigger=!0,this.dialogScript.init([{name:"系統提示",content:"獲得道具「月輪」（開起背包查看）",url:"tools/hat/spriteFrame"}]),y.TOOLS.push({name:"月輪",content:"傳說中的古代神器之一，由古代祭司在月光最盛的夜晚打造",url:"tools/hat/spriteFrame"}),this.crate.off(u.EventType.TOUCH_START,this.onTouchStart,this)},n.onTouchRelive=function(t){var e=this;this.dialogScript.init([{name:this.playerName,content:"剛剛發生了什麼？",url:"Dialog/role/hero/spriteFrame"}]),this.scheduleOnce((function(){e.setInitialGameState()}),2),this.DialogNode.off(u.EventType.TOUCH_START,this.onTouchRelive,this)},n.update=function(t){var e=this;this.DialogNode.active?this.UINode.active=!1:this.UINode.active=!0,this.heroPos=this.heroNode.getPosition(),this.banditPos=this.banditNode.getPosition(),this.distance=g.distance(this.banditPos,this.heroPos),this.triggerPos=this.triggerNode.getPosition(),this.triggerDistance=g.distance(this.triggerPos,this.heroPos),this.cratePos=this.crate.getPosition(),this.crateDistance=g.distance(this.cratePos,this.heroPos),this.tpPos=this.tpNode.getPosition(),this.tpDistance=g.distance(this.tpPos,this.heroPos),this.crateDistance<=150&&!this.onCarteTrigger&&this.crate.on(u.EventType.TOUCH_START,this.onTouchStart,this),this.triggerDistance<=100&&!this.onTrigger&&(this.onTrigger=!0,this.dialogScript.init([{name:"旁白",content:"（墓道中刻畫著密密麻麻的古老文字，似乎在訴說些什麼）",url:null},{name:this.playerName,content:"牆上盡是些看不懂的文字...",url:"Dialog/role/hero/spriteFrame"},{name:"旁白",content:"（就在這時，"+this.playerName+"手上的戒指開始不安分的震動著）",url:null}])),this.distance<=600&&!this.onBanditTrigger&&(this.onBanditTrigger=!0,this.dialogScript.init([{name:"旁白",content:"（在四處尋找線索時，"+this.playerName+"看見墓道的盡頭疑似有個人影）",url:null},{name:this.playerName,content:"你是誰？",url:"Dialog/role/hero/spriteFrame"},{name:"旁白",content:"（受到驚嚇的盜墓者，轉過身來，護著他身後的寶箱）",url:null},{name:"盜墓者",content:"你也是來奪取這裡的財寶嗎？",url:"Dialog/role/bandit/spriteFrame"},{name:"盜墓者",content:"不重要，既然都被你看到了，那就乖乖受死吧！！",url:"Dialog/role/bandit/spriteFrame"},{name:"系統提示",content:"與敵人交戰時，快速點擊兩下方向鍵可做出翻滾及滑鏟動作躲避攻擊",url:"Dialog/role/mission/spriteFrame"},{name:"旁白",content:"（盜墓者使用神器的力量開啟了一道傳送門，並向"+this.playerName+"發起攻擊）",url:null}])),"你是誰？"===this.dialogScript.textLabel.string&&this.banditNode.setScale(1,1),this.dialogScript.textLabel.string===this.playerName+"瀕臨死亡，此時聖甲蟲吊墜發出了劇烈的光芒，時空似乎發生了扭曲"&&this.DialogNode.on(u.EventType.TOUCH_START,this.onTouchRelive,this),this.dialogScript.textLabel.string!=="（盜墓者使用神器的力量開啟了一道傳送門，並向"+this.playerName+"發起攻擊）"||this.onAttack||(this.banditScript.banditState=T.isWalkingLeft,this.BGM.pause(),this.portal.active=!0,this.banditNode.getComponent(l).play(),this.scheduleOnce((function(){e.onAttack=!0}),.5)),!this.spawnBanditCD&&this.portal.active&&(this.spawnBandits(),this.spawnBanditCD=!0,this.banditScript.scheduleOnce((function(){e.spawnBanditCD=!1}),10)),this.banditInstances.forEach((function(t){var i=t.getComponent(N),o=t.getPosition(),a=g.distance(o,e.heroPos),n=e.heroNode.getPosition().x<t.getPosition().x&&e.heroNode.getScale().x>0||e.heroNode.getPosition().x>t.getPosition().x&&e.heroNode.getScale().x<0;e.heroScript.heroState===w.isAttacking&&e.heroScript.heroMode!=D.bow&&a<=150&&n&&e.scheduleOnce((function(){i.banditTakeDamage(e.heroScript.attackPower),i.banditState=T.isHurt}),.2),e.heroScript.getArrowPosition()&&e.heroScript.getArrowPosition().subtract(t.getPosition()).length()<=120&&(i.banditTakeDamage(e.heroScript.attackPower),i.banditState=T.isHurt,e.heroScript.arrow.destroy()),i.banditState!==T.isAttacking||e.isHeroDead||e.scheduleOnce((function(){a<=160&&!e.heroScript.isInvincible&&(e.heroScript.heroTakeDamage(i.attackPower),e.heroScript.heroState=w.isHurt)}),.4),(e.heroScript.hp<0||0===e.heroScript.hp)&&!e.isHeroDead&&(e.heroScript.heroState=w.isDie,e.isHeroDead=!0,e.scheduleOnce((function(){e.dialogScript.init([{name:"旁白",content:e.playerName+"瀕臨死亡，此時聖甲蟲吊墜發出了劇烈的光芒，時空似乎發生了扭曲",url:null}])}),1),e.fadeToWhite()),i.hp<=0&&(i.banditState=T.isDie)})),this.tpDistance<=150&&!this.isTp&&(this.isTp=!0,this.saveGameState(),d.loadScene("TAKE5"),this.fadeToBlack(),this.endScene()),this.checkAllBanditsDead()},n.checkAllBanditsDead=function(){var t=this;this.banditInstances.every((function(t){return t.getComponent(N).banditState===T.isDie}))&&(this.isKillBandit=!0,this.banditNode.getComponent(l).stop(),this.isGetSword||(this.scheduleOnce((function(){t.dialogScript.init([{name:"系統提示",content:"獲得道具「劫墓之刃」",url:"tools/sword/spriteFrame"}]),y.TOOLS.push({name:"劫墓之刃",content:"這把古老的劍曾經屬於一位狡猾的盜墓者，劍身上佈滿了歲月的痕跡和戰鬥的傷痕（點擊使用）",url:"tools/sword/spriteFrame"})}),1),this.isGetSword=!0),console.log("所有 bandit 已死亡"),this.portal.active=!1)},n.fadeToWhite=function(){this.deaths++,b(this.WhiteOverlay.getComponent(S)).to(4,{color:new m(255,255,255,255)},{easing:"cubicInOut"}).start()},n.fadeToOpacity=function(){b(this.WhiteOverlay.getComponent(S)).to(2,{color:new m(255,255,255,0)},{easing:"cubicInOut"}).start()},n.fadeToBlack=function(){b(this.WhiteOverlay.getComponent(S)).to(1,{color:new m(0,0,0,255)},{easing:"cubicInOut"}).start()},n.endScene=function(){var t=new Date,e=Math.round((t.getTime()-this.startTime.getTime())/1e3),i=this.globalNode.getGameData().total_duration+e,o=this.globalNode.getGameData().level1_duration+=e,a=this.globalNode.getGameData().level1_deaths+=this.deaths;this.globalNode.setGameData({weapon_used:this.heroScript.heroMode,bandit_defeated:this.isKillBandit,level1_deaths:a,level1_duration:o,playerHP_remaining:this.heroScript.hp,total_duration:i}),console.log(this.globalNode.getGameData())},n.saveGameState=function(){var t={heroPosition:this.heroNode.getPosition(),heroState:this.heroScript.heroState,heroHp:this.heroScript.hp,banditPosition:this.banditNode.getPosition(),banditState:this.banditScript.banditState,banditHp:this.banditScript.hp,isFirstLoad:this.isFirstLoad,onCarteTrigger:this.onCarteTrigger,isGetSword:this.isGetSword,isKillBandit:this.isKillBandit};localStorage.setItem("gameStateTAKE4",JSON.stringify(t))},n.loadGameState=function(){var t=localStorage.getItem("gameStateTAKE4");if(t){var e=JSON.parse(t);this.heroNode.setPosition(e.heroPosition.x-=100,e.heroPosition.y),this.heroNode.setScale(-1,1),this.heroScript.heroMode=this.globalNode.getGameData().weapon_used,this.heroScript.heroState=w.isIdle,this.heroScript.hp=this.globalNode.getGameData().playerHP_remaining,this.banditNode.setPosition(e.banditPosition),this.banditScript.banditState=e.banditState,this.banditScript.hp=e.banditHp,this.onBanditTrigger=!0,this.onTrigger=!0,this.isFirstLoad=e.isFirstLoad,this.onCarteTrigger=e.onCarteTrigger,this.isGetSword=e.isGetSword,this.isKillBandit=e.isKillBandit,this.portal.active=!e.isKillBandit,this.isKillBandit||(this.BGM.pause(),this.banditNode.getComponent(l).play())}else this.setInitialGameState()},n.setInitialGameState=function(){this.isHeroDead=!1,this.heroScript.isHurt=!1,this.heroNode.setPosition(-1800,-70),this.heroNode.setScale(1,1),this.heroScript.heroMode=D.punch,this.heroScript.heroState=w.isIdle,this.heroScript.hp=20,this.banditNode.setPosition(1300,150),this.banditScript.banditState=T.isIdle,this.banditScript.hp=12,this.fadeToOpacity()},e}(f)).prototype,"banditNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(R.prototype,"banditPrefab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(R.prototype,"banditContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(R.prototype,"heroNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(R.prototype,"UINode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(R.prototype,"DialogNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(R.prototype,"triggerNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(R.prototype,"tpNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(R.prototype,"crate",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(R.prototype,"WhiteOverlay",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(R.prototype,"BlackOverlay",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(R.prototype,"Camera",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(R.prototype,"portal",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=R))||x));n._RF.pop()}}}));

System.register("chunks:///_virtual/TAKE5.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mummy.ts","./dialogue.ts","./conf.ts","./hero.ts","./GlobalData.ts","./sarcophagus.ts"],(function(t){var e,i,o,s,a,n,r,h,l,c,u,m,p,g,d,T,S,y,f,N,b,D,v,P,C,k,w,O,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){a=t.cclegacy,n=t._decorator,r=t.Node,h=t.Prefab,l=t.VideoPlayer,c=t.AudioClip,u=t.AudioSource,m=t.find,p=t.director,g=t.Input,d=t.instantiate,T=t.Vec3,S=t.tween,y=t.Sprite,f=t.Color,N=t.Component},function(t){b=t.mummy,D=t.State},function(t){v=t.dialogue},function(t){P=t.conf},function(t){C=t.hero,k=t.CharacterState},function(t){w=t.GlobalData},function(t){O=t.sarcophagus,A=t.sarcophagusState}],execute:function(){var G,H,_,E,F,x,R,I,L,U,M,B,K,z,W,V,J,Z,j,X,q,Q,Y,$,tt,et,it,ot,st;a._RF.push({},"5bccanXeBZGlL5Bd2+5MGZa","TAKE5",void 0);var at=n.ccclass,nt=n.property;t("TAKE5",(G=at("TAKE5"),H=nt(r),_=nt(r),E=nt(h),F=nt(r),x=nt(r),R=nt(r),I=nt(r),L=nt(r),U=nt(r),M=nt(r),B=nt(r),K=nt(l),z=nt({type:c}),G((J=e((V=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,o(e,"mummyNode",J,s(e)),o(e,"heroNode",Z,s(e)),o(e,"sarcophagusPrefab",j,s(e)),o(e,"sarcophagusContainer",X,s(e)),o(e,"UINode",q,s(e)),o(e,"DialogNode",Q,s(e)),o(e,"triggerNode",Y,s(e)),o(e,"tpNode",$,s(e)),o(e,"crate",tt,s(e)),o(e,"check",et,s(e)),o(e,"WhiteOverlay",it,s(e)),o(e,"moon",ot,s(e)),o(e,"openDoor",st,s(e)),e.BGM=new u,e.soundEffect=new u,e.mummyScript=void 0,e.heroScript=void 0,e.dialogScript=void 0,e.heroPos=void 0,e.mummyPos=void 0,e.triggerPos=void 0,e.distance=void 0,e.triggerDistance=void 0,e.crateDistance=void 0,e.cratePos=void 0,e.tpPos=void 0,e.tpDistance=void 0,e.checkPos=void 0,e.checkDistance=void 0,e.startTime=null,e.playerName=void 0,e.deaths=0,e.isHeroDead=!1,e.ismummyDead=!1,e.isKillMummy=!1,e.isSummonSarcophagus=!1,e.isTp=!1,e.onTrigger=!1,e.onCarteTrigger=!1,e.isFirstLoad=!1,e.isGetBow=!1,e.onAttack=!1,e.onCheck=!1,e.firstCheck=!0,e.isTpToTake6=!1,e.onCheckCallback=void 0,e.globalNode=void 0,e.sarcophagusInstances=[],e}i(e,t);var a=e.prototype;return a.onListen=function(){this.moon.node.on(l.EventType.PAUSED,this.onVideoCompleted,this)},a.start=function(){this.startTime=new Date,this.globalNode=m("GlobalNode").getComponent(w),this.playerName=this.globalNode.getGameData().player_name,p.preloadScene("TAKE6"),this.BGM=this.node.getComponent(u),this.BGM.play(),this.UINode.active=!1,this.mummyScript=this.mummyNode.getComponent(b),this.heroScript=this.heroNode.getComponent(C),this.dialogScript=this.DialogNode.getComponent(v),this.loadGameState(),this.isFirstLoad||(this.isFirstLoad=!0,this.dialogScript.init([{name:"旁白",content:"（"+this.playerName+"進到了一個更狹窄的墓道）",url:null},{name:"旁白",content:"本該漆黑無比的地方，幾盞燈火把散落一地的黃金照的熠熠生輝",url:null},{name:this.playerName,content:"難道...這些是法老王的陪葬品？",url:"Dialog/role/hero/spriteFrame"}])),this.onCheckCallback=function(){this.onCheck=!1}},a.onVideoCompleted=function(t){console.log("Video completed"),p.loadScene("TAKE6")},a.onTouchStart=function(t){this.onCarteTrigger=!0,this.dialogScript.init([{name:"旁白",content:"（"+this.playerName+"忍不住觸碰了其中一個雕飾）",url:null},{name:"系統提示",content:"獲得道具「生命之符」",url:"tools/cross/spriteFrame"},{name:"旁白",content:"（突然間石棺開始震動，一股不祥之息壟罩整個墓室）",url:null}]),this.crate.off(g.EventType.TOUCH_START,this.onTouchStart,this),P.TOOLS.push({name:"生命之符",content:"法老王的陪葬品之一，相傳它有著使人起死回生的力量",url:"tools/cross/spriteFrame"})},a.onTouchRelive=function(t){this.mummyNode.active=!0,this.heroNode.setPosition(-570,29),this.mummyScript.mummyState=D.isRelive,this.DialogNode.off(g.EventType.TOUCH_START,this.onTouchRelive,this),this.dialogScript.init([{name:"旁白",content:"（受到驚嚇的"+this.playerName+"馬上往後退了一步）",url:null},{name:"旁白",content:"（甦醒過來的木乃伊勃然大怒）",url:null},{name:"木乃伊",content:"好大的膽子，竟然敢打擾朕長眠",url:"Dialog/role/mummy/spriteFrame"},{name:"木乃伊",content:"你的靈魂將永遠被困在這古墓之中，成為我的僕從，永無安寧！",url:"Dialog/role/mummy/spriteFrame"}])},a.onTouchAttack=function(t){this.BGM.stop(),this.mummyNode.getComponent(u).play(),this.schedule(this.mummyScript.callback,.006),this.isTp=!0,this.DialogNode.off(g.EventType.TOUCH_START,this.onTouchAttack,this)},a.onTouchHeroRelive=function(t){var e=this;this.dialogScript.init([{name:this.playerName,content:"剛剛發生了什麼？",url:"Dialog/role/hero/spriteFrame"}]),this.scheduleOnce((function(){e.setInitialGameState(),e.heroScript.hp=20}),2),this.DialogNode.off(g.EventType.TOUCH_START,this.onTouchHeroRelive,this)},a.onTouchBack=function(t){this.heroNode.setPosition(1200,-257),this.heroNode.setScale(-1,1),this.onCheck=!1,this.DialogNode.off(g.EventType.TOUCH_START,this.onTouchBack,this)},a.onTouchTpToTake6=function(t){this.moon.node.active=!0,this.BGM.stop(),this.moon.play(),this.endScene(),this.DialogNode.off(g.EventType.TOUCH_START,this.onTouchTpToTake6,this)},a.onTouchCheck=function(t){this.hasTool("生命之符")&&this.hasTool("月輪")?this.dialogScript.init([{name:"旁白",content:"（"+this.playerName+"將收集來的月輪及生命之符放入後，神像開始劇烈的晃動，通往月球的阿努比斯之門緩緩開起）",url:null}]):this.hasTool("生命之符")?this.dialogScript.init([{name:"旁白",content:"（"+this.playerName+"將收集來的生命之符放入後，卻還是缺了一樣）",url:null},{name:this.playerName,content:"似乎還有物品沒找到...再回去找找看好了",url:"Dialog/role/hero/spriteFrame"},{name:"系統提示",content:"找不到道具嗎？嘗試點擊地圖上的物件，尋找隱藏的神器！",url:"Dialog/role/mission/spriteFrame"}]):this.hasTool("月輪")?this.dialogScript.init([{name:"旁白",content:"（"+this.playerName+"將收集來的月輪放入後，卻還是缺了一樣）",url:null},{name:this.playerName,content:"似乎還有物品沒找到...再回去找找看好了",url:"Dialog/role/hero/spriteFrame"},{name:"系統提示",content:"找不到道具嗎？嘗試點擊地圖上的物件，尋找隱藏的神器！",url:"Dialog/role/mission/spriteFrame"}]):this.dialogScript.init([{name:"旁白",content:"（"+this.playerName+"觸摸了神像，但什麼事情都沒發生）",url:null},{name:this.playerName,content:"似乎還有物品沒找到...再回去找找看好了",url:"Dialog/role/hero/spriteFrame"},{name:"系統提示",content:"找不到道具嗎？嘗試點擊地圖上的物件，尋找隱藏的神器！",url:"Dialog/role/mission/spriteFrame"}]),this.scheduleOnce(this.onCheckCallback,30),this.DialogNode.off(g.EventType.TOUCH_START,this.onTouchCheck,this)},a.endScene=function(){var t=new Date,e=Math.round((t.getTime()-this.startTime.getTime())/1e3),i=this.globalNode.getGameData().total_duration+e,o=this.globalNode.getGameData().level2_duration+=e,s=this.globalNode.getGameData().level2_deaths+=this.deaths;this.globalNode.setGameData({weapon_used:this.heroScript.heroMode,mummy_defeated:this.isKillMummy,level2_deaths:s,level2_duration:o,playerHP_remaining:this.heroScript.hp,total_duration:i}),console.log(this.globalNode.getGameData())},a.spawnSarcophagus=function(t){for(var e=0;e<2;e++){var i=d(this.sarcophagusPrefab);0==e&&i.setPosition(t.x+100,t.y+400,0),1==e&&i.setPosition(t.x-100,t.y+400,0),this.sarcophagusContainer.addChild(i),this.sarcophagusInstances.push(i)}},a.update=function(t){var e=this;this.DialogNode.active?this.UINode.active=!1:this.UINode.active=!0,this.heroPos=this.heroNode.getPosition(),this.mummyPos=this.mummyNode.getPosition(),this.distance=T.distance(this.mummyPos,this.heroPos),this.triggerPos=this.triggerNode.getPosition(),this.triggerDistance=T.distance(this.triggerPos,this.heroPos),this.cratePos=this.crate.getPosition(),this.crateDistance=T.distance(this.cratePos,this.heroPos),this.tpPos=this.tpNode.getPosition(),this.tpDistance=T.distance(this.tpPos,this.heroPos),this.checkPos=this.check.getPosition(),this.checkDistance=T.distance(this.checkPos,this.heroPos),this.checkDistance<=61&&!this.onCheck&&(this.onCheck=!0,this.firstCheck?(this.dialogScript.init([{name:"旁白",content:"（"+this.playerName+"來到神秘的地下室後，看到了一尊古老的神像）",url:null},{name:this.playerName,content:"這個神像的雙手各有一個缺口，彷彿曾經握著什麼東西",url:"Dialog/role/hero/spriteFrame"}]),this.firstCheck=!1):this.dialogScript.init([{name:this.playerName,content:"又回到這裡了",url:"Dialog/role/hero/spriteFrame"}])),this.crateDistance<=150&&!this.onCarteTrigger&&this.crate.on(g.EventType.TOUCH_START,this.onTouchStart,this),this.triggerDistance<=50&&!this.onTrigger&&(this.onTrigger=!0,this.dialogScript.init([{name:"旁白",content:"（"+this.playerName+"來到墓室，看見了一個石棺）",url:null},{name:"旁白",content:"（石棺異常的厚重，並且上面刻有大量精美的雕飾）",url:null}])),"這個神像的雙手各有一個缺口，彷彿曾經握著什麼東西"!=this.dialogScript.textLabel.string&&"又回到這裡了"!=this.dialogScript.textLabel.string||this.DialogNode.on(g.EventType.TOUCH_START,this.onTouchCheck,this),"（突然間石棺開始震動，一股不祥之息壟罩整個墓室）"==this.dialogScript.textLabel.string&&this.DialogNode.on(g.EventType.TOUCH_START,this.onTouchRelive,this),"你的靈魂將永遠被困在這古墓之中，成為我的僕從，永無安寧！"!=this.dialogScript.textLabel.string||this.onAttack||(this.onAttack=!0,this.DialogNode.on(g.EventType.TOUCH_START,this.onTouchAttack,this));var i=this.heroNode.getPosition().x<this.mummyNode.getPosition().x&&this.heroNode.getScale().x>0||this.heroNode.getPosition().x>this.mummyNode.getPosition().x&&this.heroNode.getScale().x<0;this.heroScript.heroState==k.isAttacking&&this.distance<=150&&!this.ismummyDead&&i&&this.scheduleOnce((function(){this.mummyScript.mummyTakeDamage(this.heroScript.attackPower),this.mummyScript.mummyState=D.isHurt}),.2),this.mummyScript.mummyState!=D.isAttacking||this.isHeroDead||this.scheduleOnce((function(){this.distance<=150&&!this.heroScript.isInvincible&&(this.heroScript.heroTakeDamage(this.mummyScript.attackPower),this.heroScript.heroState=k.isHurt)}),.2),this.mummyScript.mummyState!=D.isHeal||this.isSummonSarcophagus||(this.isSummonSarcophagus=!0,this.spawnSarcophagus(this.heroPos),this.scheduleOnce((function(){e.isSummonSarcophagus=!1}),10)),(this.heroScript.hp<0||0==this.heroScript.hp)&&!this.isHeroDead&&(this.heroScript.heroState=k.isDie,this.isHeroDead=!0,this.scheduleOnce((function(){e.dialogScript.init([{name:"旁白",content:e.playerName+"瀕臨死亡，此時聖甲蟲吊墜發出了劇烈的光芒，時空似乎發生了扭曲",url:null}])}),1),this.fadeToWhite()),this.dialogScript.textLabel.string===this.playerName+"瀕臨死亡，此時聖甲蟲吊墜發出了劇烈的光芒，時空似乎發生了扭曲"&&this.DialogNode.on(g.EventType.TOUCH_START,this.onTouchHeroRelive,this),this.dialogScript.textLabel.string!=="（"+this.playerName+"將收集來的月輪及生命之符放入後，神像開始劇烈的晃動，通往月球的阿努比斯之門緩緩開起）"||this.isTpToTake6||(this.isTpToTake6=!0,this.mummyNode.getComponent(u).stop(),this.soundEffect.playOneShot(this.openDoor),this.DialogNode.on(g.EventType.TOUCH_START,this.onTouchTpToTake6,this)),this.mummyScript.hp<=0&&!this.ismummyDead&&(this.mummyScript.mummyState=D.isDie,this.mummyNode.getComponent(u).stop(),this.ismummyDead=!0,this.isKillMummy=!0,this.unschedule(this.mummyScript.callback),this.isGetBow||(this.scheduleOnce((function(){this.dialogScript.init([{name:"系統提示",content:"獲得道具「三角弓」",url:"tools/bow/spriteFrame"}]),P.TOOLS.push({name:"三角弓",content:"古代法老的專屬武器，他曾用這把弓征戰四方（點擊使用）",url:"tools/bow/spriteFrame"})}),1),this.isGetBow=!0),this.isTp=!1),this.sarcophagusInstances.forEach((function(t){var i=t.getComponent(O),o=t.getPosition(),s=T.distance(o,e.heroPos),a=e.heroNode.getPosition().x<t.getPosition().x&&e.heroNode.getScale().x>0||e.heroNode.getPosition().x>t.getPosition().x&&e.heroNode.getScale().x<0;e.heroScript.heroState==k.isAttacking&&s<=170&&a&&e.scheduleOnce((function(){i.sarcophagusTakeDamage(this.heroScript.attackPower),i.sarcophagusState=A.isHurt}),.2),i.hp<=0&&(i.sarcophagusState=A.isDie)})),this.tpDistance<=80&&!this.isTp&&(this.isTp=!0,this.saveGameState(),p.loadScene("TAKE4"),this.endScene())},a.fadeToWhite=function(){this.deaths++,S(this.WhiteOverlay.getComponent(y)).to(4,{color:new f(255,255,255,255)},{easing:"cubicInOut"}).start()},a.fadeToOpacity=function(){S(this.WhiteOverlay.getComponent(y)).to(2,{color:new f(255,255,255,0)},{easing:"cubicInOut"}).start()},a.saveGameState=function(){var t={heroPosition:this.heroNode.getPosition(),heroState:this.heroScript.heroState,heroHp:this.heroScript.hp,isFirstLoad:this.isFirstLoad,onCarteTrigger:this.onCarteTrigger,onTrigger:this.onTrigger,isGetBow:this.isGetBow,firstCheck:this.firstCheck,isKillMummy:this.isKillMummy};localStorage.setItem("gameStateTAKE5",JSON.stringify(t))},a.loadGameState=function(){var t=localStorage.getItem("gameStateTAKE5");if(t){var e=JSON.parse(t);this.heroNode.setPosition(e.heroPosition.x+=100,e.heroPosition.y),this.heroNode.setScale(1,1),this.heroScript.heroMode=this.globalNode.getGameData().weapon_used,this.heroScript.heroState=k.isIdle,this.heroScript.hp=this.globalNode.getGameData().playerHP_remaining,this.onTrigger=e.onTrigger,this.isFirstLoad=e.isFirstLoad,this.onCarteTrigger=e.onCarteTrigger,this.isGetBow=e.isGetBow,this.firstCheck=e.firstCheck,this.isKillMummy=e.isKillMummy}else this.setInitialGameState()},a.setInitialGameState=function(){this.isHeroDead=!1,this.heroScript.isHurt=!1,this.heroNode.setPosition(-1320,40),this.heroNode.setScale(1,1),this.heroScript.heroMode=this.globalNode.getGameData().weapon_used,this.heroScript.heroState=k.isIdle,this.heroScript.hp=this.globalNode.getGameData().playerHP_remaining,this.mummyScript.hp=40,this.fadeToOpacity()},a.hasTool=function(t){return P.TOOLS.some((function(e){return e.name===t}))},e}(N)).prototype,"mummyNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(V.prototype,"heroNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(V.prototype,"sarcophagusPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(V.prototype,"sarcophagusContainer",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(V.prototype,"UINode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(V.prototype,"DialogNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(V.prototype,"triggerNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(V.prototype,"tpNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(V.prototype,"crate",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(V.prototype,"check",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(V.prototype,"WhiteOverlay",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(V.prototype,"moon",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(V.prototype,"openDoor",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=V))||W));a._RF.pop()}}}));

System.register("chunks:///_virtual/TAKE6.ts",["./rollupPluginModLoBabelHelpers.js","cc","./boss.ts","./dialogue.ts","./hero.ts","./cameraCtrl.ts","./GlobalData.ts"],(function(e){var t,o,i,s,a,r,n,l,h,c,d,p,u,g,m,b,S,y,N,f,D,T,v,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,n=e.Node,l=e.VideoPlayer,h=e.AudioSource,c=e.director,d=e.find,p=e.Input,u=e.Vec3,g=e.v2,m=e.Component},function(e){b=e.boss,S=e.Mode,y=e.State},function(e){N=e.dialogue},function(e){f=e.hero,D=e.CharacterMode,T=e.CharacterState},function(e){v=e.CameraCtrl},function(e){_=e.GlobalData}],execute:function(){var E,P,w,H,A,C,G,k,B,M,F,R,x,O,U,z,I,K,L,V,j;a._RF.push({},"cb179R7B61I7LBbt7wm3bI6","TAKE6",void 0);var W=r.ccclass,J=r.property;e("TAKE6",(E=W("TAKE6"),P=J(n),w=J(n),H=J(n),A=J(n),C=J(n),G=J(n),k=J(n),B=J(l),M=J(l),E((x=t((R=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"bossNode",x,s(t)),i(t,"bossHitbox",O,s(t)),i(t,"heroNode",U,s(t)),i(t,"UINode",z,s(t)),i(t,"DialogNode",I,s(t)),i(t,"triggerNode",K,s(t)),i(t,"cameraNode",L,s(t)),i(t,"badEnding",V,s(t)),i(t,"happyEnding",j,s(t)),t.BGM=new h,t.bossScript=void 0,t.heroScript=void 0,t.dialogScript=void 0,t.heroPos=void 0,t.bossPos=void 0,t.triggerPos=void 0,t.distance=void 0,t.triggerDistance=void 0,t.startTime=null,t.isKillBoss=!1,t.playerName=void 0,t.globalNode=void 0,t.isHeroDead=!1,t.isbossDead=!1,t.onTrigger=!1,t.onAttack=!1,t.onRelive=!1,t.isBgmStop=!1,t.onHEplayed=!1,t.onBEplayed=!1,t}o(t,e);var a=t.prototype;return a.onListen=function(){this.badEnding.node.on(l.EventType.PAUSED,this.onVideoCompletedBE,this),this.happyEnding.node.on(l.EventType.PAUSED,this.onVideoCompletedHE,this)},a.onVideoCompletedBE=function(e){console.log("Video completed"),c.loadScene("START")},a.onVideoCompletedHE=function(e){console.log("Video completed"),c.loadScene("TAKE7")},a.start=function(){this.startTime=new Date,this.globalNode=d("GlobalNode").getComponent(_),this.playerName=this.globalNode.getGameData().player_name,c.preloadScene("START"),c.preloadScene("TAKE7"),this.BGM=this.node.getComponent(h),this.BGM.play(),this.UINode.active=!1,this.bossScript=this.bossNode.getComponent(b),this.heroScript=this.heroNode.getComponent(f),this.dialogScript=this.DialogNode.getComponent(N),this.heroScript.heroMode=this.globalNode.getGameData().weapon_used,this.dialogScript.init([{name:"旁白",content:"（"+this.playerName+"走進門後，來到了一個杳無人煙的灰色平原）",url:null},{name:this.playerName,content:"我來到月球了嗎？！呼吸不到空氣了...",url:"Dialog/role/hero/spriteFrame"},{name:"旁白",content:"（此時聖甲蟲吊墜綻放了最後的光芒，為"+this.playerName+"的肺部提供了新鮮的氧氣）",url:null},{name:this.playerName,content:"吊墜變的黯淡無光...難道它耗盡力量了嗎",url:"Dialog/role/hero/spriteFrame"},{name:"旁白",content:"（"+this.playerName+"回憶起這段旅程，每當他遇到危險時，聖甲蟲吊墜就會發動力量保護他）",url:null},{name:this.playerName,content:"原來是我的祖先一直在守護著我...看來我必須這裡了結我的宿命",url:"Dialog/role/hero/spriteFrame"}])},a.onTouchAttack=function(e){this.schedule(this.bossScript.callback,.006),this.DialogNode.off(p.EventType.TOUCH_START,this.onTouchAttack,this)},a.onTouchTrigger=function(e){this.triggerNode.getComponent(h).stop(),this.BGM.play(),this.DialogNode.off(p.EventType.TOUCH_START,this.onTouchTrigger,this)},a.onTouchPlayHE=function(e){this.BGM.stop(),this.happyEnding.node.active=!0,this.happyEnding.play(),this.endScene(),this.DialogNode.off(p.EventType.TOUCH_START,this.onTouchPlayHE,this)},a.onTouchPlayBE=function(e){this.bossNode.getComponent(h).stop(),this.badEnding.node.active=!0,this.badEnding.play(),this.endGame(),this.DialogNode.off(p.EventType.TOUCH_START,this.onTouchPlayBE,this)},a.endScene=function(){var e=new Date,t=Math.round((e.getTime()-this.startTime.getTime())/1e3),o=this.globalNode.getGameData().total_duration+t;this.globalNode.setGameData({weapon_used:this.heroScript.heroMode,khonsu_defeated:this.isKillBoss,level3_duration:t,bossHP_remaining:null,playerHP_remaining:this.heroScript.hp,total_duration:o}),console.log(this.globalNode.getGameData())},a.endGame=function(){function e(e){var o=Math.floor(e/3600),i=Math.floor(e%3600/60),s=e%60;return[t(o,2),t(i,2),t(s,2)].join(":")}function t(e,t){var o=e.toString();return o.length>=t?o:"0".repeat(t-o.length)+o}var o,i=this.globalNode.getGameData().device_model,s=this.globalNode.getGameData().player_name;switch(this.globalNode.getGameData().weapon_used){case 1:o="punch";break;case 2:o="sword";break;case 3:o="bow"}var a={device_model:i,player_name:s,level1_deaths:this.globalNode.getGameData().level1_deaths,level1_duration:e(this.globalNode.getGameData().level1_duration),bandit_defeated:this.globalNode.getGameData().bandit_defeated,level2_deaths:this.globalNode.getGameData().level2_deaths,level2_duration:e(this.globalNode.getGameData().level2_duration),mummy_defeated:this.globalNode.getGameData().mummy_defeated,level3_duration:null,khonsu_defeated:this.globalNode.getGameData().khonsu_defeated,playerHP_remaining:null,bossHP_remaining:this.bossScript.hp,weapon_used:o,total_duration:null};fetch("https://www.whaozhi.com/save_time",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.error("Error:",e)}))},a.update=function(e){var t=this;if(this.bossScript.bossMode=S.slash,this.DialogNode.active?this.UINode.active=!1:this.UINode.active=!0,this.heroPos=this.heroNode.getPosition(),this.bossPos=this.bossNode.getPosition(),this.distance=u.distance(this.bossPos,this.heroPos),this.triggerPos=this.triggerNode.getPosition(),this.triggerDistance=u.distance(this.triggerPos,this.heroPos),this.distance<=300&&!this.onRelive&&(this.onRelive=!0,this.BGM.stop(),this.bossNode.active=!0,this.bossScript.bossState=y.isRelive,this.cameraNode.getComponent(v).followOffset=g(100,100),this.dialogScript.init([{name:"孔蘇",content:"看來我應該在更謹慎點的...歡迎你，預言之子",url:"Dialog/role/boss/spriteFrame"},{name:"孔蘇",content:"我的子嗣啊，難道你妄想著能成為拯救世界的英雄嗎",url:"Dialog/role/boss/spriteFrame"},{name:this.playerName,content:"我只是想平凡的活下去而已...如果我身上的血脈...如果只有我能阻止末日，那我就必須打敗你！！",url:"Dialog/role/hero/spriteFrame"},{name:"孔蘇",content:"就憑你？我可是能呼風喚雨的存在！乖乖等待末日的到來吧",url:"Dialog/role/boss/spriteFrame"},{name:this.playerName,content:"你為什麼要這麼做？難道擁有強大的力量，就能隨意操弄別人的生命嗎",url:"Dialog/role/hero/spriteFrame"},{name:"孔蘇",content:"住口，現在的我對人類只有無盡的恨意",url:"Dialog/role/boss/spriteFrame"},{name:this.playerName,content:"那為什麼這麼多年來你都沒有對人類出手，其實你還是愛著人類的對吧？",url:"Dialog/role/hero/spriteFrame"},{name:"孔蘇",content:"愛著人類？哈哈哈哈哈哈，在我恢復力量的期間，我一直觀察著吊墜的情形",url:"Dialog/role/boss/spriteFrame"},{name:"孔蘇",content:'為了防止預言中"失落的後裔"干擾我的滅世計畫，我找到了你的父母想奪回吊墜，雖然最終它還是落到了你手上，但一切都太遲了！',url:"Dialog/role/boss/spriteFrame"},{name:this.playerName,content:"謝謝你拯救了我的祖先，讓我有機會誕生在這世上，但我會在這裡打敗你，貫徹我的使命",url:"Dialog/role/hero/spriteFrame"},{name:"孔蘇",content:"好一個賺人熱淚的戲碼，沒想到你寧願冒著生命危險，突破層層關卡來找我，也不願意把剩下的時間和你唯一的家人度過",url:"Dialog/role/boss/spriteFrame"},{name:this.playerName,content:"家人...？你到底在說什麼？",url:"Dialog/role/hero/spriteFrame"},{name:"孔蘇",content:"哈哈，你不記得了嗎？"+this.playerName+"．艾利特",url:"Dialog/role/boss/spriteFrame"},{name:this.playerName,content:this.playerName+"．艾利特？這是我的本名嗎？？難道樂媞是我的親人？",url:"Dialog/role/hero/spriteFrame"},{name:"旁白",content:"（"+this.playerName+"頭痛欲裂，想起了關於樂媞的所有回憶）",url:null},{name:this.playerName,content:"孔蘇，我一定要在這裡打敗你！！！",url:"Dialog/role/hero/spriteFrame"}])),this.triggerDistance<=50&&!this.onTrigger&&(this.onTrigger=!0,this.BGM.stop(),this.triggerNode.getComponent(h).play(),this.dialogScript.init([{name:"旁白",content:"（"+this.playerName+"來到一處衛星接收站，並嘗試接收來自地球的訊號）",url:null},{name:"新聞主播",content:"這邊為您插播即時消息。目前月球正在快速往地球方向接近，全球海平面劇烈上升中，請民眾做好避難準備！",url:"Dialog/role/woman/spriteFrame"},{name:this.playerName,content:"留給我的時間不多了，我必須馬上阻止孔蘇",url:"Dialog/role/hero/spriteFrame"}])),"留給我的時間不多了，我必須馬上阻止孔蘇"!=this.dialogScript.textLabel.string||this.isBgmStop||(this.isBgmStop=!0,this.DialogNode.on(p.EventType.TOUCH_START,this.onTouchTrigger,this)),"孔蘇，我一定要在這裡打敗你！！！"!=this.dialogScript.textLabel.string||this.onAttack||(this.onAttack=!0,this.DialogNode.on(p.EventType.TOUCH_START,this.onTouchAttack,this)),"（希望之光再次照耀大地，地球得以回歸平靜）"!=this.dialogScript.textLabel.string||this.onHEplayed||(this.onHEplayed=!0,this.DialogNode.on(p.EventType.TOUCH_START,this.onTouchPlayHE,this)),this.dialogScript.textLabel.string!="（"+this.playerName+"未能成功阻止末日的到來，月球徑直地往地球墜落）"||this.onBEplayed||(this.onBEplayed=!0,this.DialogNode.on(p.EventType.TOUCH_START,this.onTouchPlayBE,this)),this.heroScript.heroMode==D.bow?this.bossScript.bossMode=S.cast:this.bossScript.bossMode=S.slash,this.bossScript.bossMode!=S.slash||this.bossScript.bossState!=y.isAttacking||this.isHeroDead||this.scheduleOnce((function(){this.distance<=205&&!this.heroScript.isInvincible&&(this.heroScript.heroTakeDamage(this.bossScript.attackPower),this.heroScript.heroState=T.isHurt)}),.25),this.bossScript.bossMode==S.cast&&this.bossScript.bossState==y.isAttacking&&!this.isHeroDead){var o=this.distance;this.scheduleOnce((function(){this.distance<=o+50&&this.distance>=o-50&&(this.heroScript.heroTakeDamage(this.bossScript.attackPower),this.heroScript.heroState=T.isHurt)}),.6)}(this.heroScript.hp<0||0==this.heroScript.hp)&&!this.isHeroDead&&(this.heroScript.heroState=T.isDie,this.isHeroDead=!0,this.unschedule(this.bossScript.callback),this.scheduleOnce((function(){t.dialogScript.init([{name:"旁白",content:"（"+t.playerName+"未能成功阻止末日的到來，月球徑直地往地球墜落）",url:null}])}),1));var i=this.bossHitbox.getWorldPosition(),s=this.heroNode.getWorldPosition(),a=u.distance(i,s),r=s.x<i.x&&this.heroNode.getScale().x>0||s.x>i.x&&this.heroNode.getScale().x<0;console.log(a),this.heroScript.heroState==T.isAttacking&&this.heroScript.heroMode!=D.bow&&a<=170&&!this.isbossDead&&r&&this.scheduleOnce((function(){this.bossScript.bossTakeDamage(this.heroScript.attackPower),this.bossScript.bossState=y.isHurt}),.2),this.heroScript.getArrowPosition()&&!this.isbossDead&&this.heroScript.getArrowPosition().subtract(this.bossNode.getPosition()).length()<=120&&(this.bossScript.bossTakeDamage(this.heroScript.attackPower),this.bossScript.bossState=y.isHurt,this.heroScript.arrow.destroy()),this.bossScript.hp<=0&&!this.isbossDead&&(this.bossScript.bossState=y.isDie,this.bossNode.getComponent(h).stop(),this.BGM.play(),this.isbossDead=!0,this.isKillBoss=!0,this.unschedule(this.bossScript.callback),this.dialogScript.init([{name:"旁白",content:"（勇敢的"+this.playerName+"打敗了神，成功阻止了末日的到來）",url:null},{name:"旁白",content:"（他的勇氣和智慧克服了一切阻礙，萬物也因此得到救贖）",url:null},{name:"旁白",content:"（希望之光再次照耀大地，地球得以回歸平靜）",url:null}]))},t}(m)).prototype,"bossNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(R.prototype,"bossHitbox",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(R.prototype,"heroNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(R.prototype,"UINode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(R.prototype,"DialogNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(R.prototype,"triggerNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(R.prototype,"cameraNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(R.prototype,"badEnding",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(R.prototype,"happyEnding",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=R))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/TAKE7.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dialogue.ts","./GlobalData.ts"],(function(e){var t,a,o,n,i,l,r,d,s,u,h,c,g,m,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,r=e.Node,d=e.VideoPlayer,s=e.AudioSource,u=e.director,h=e.find,c=e.Input,g=e.Component},function(e){m=e.dialogue},function(e){p=e.GlobalData}],execute:function(){var T,f,b,v,_,D,N;i._RF.push({},"27a73EHLQFIXKufX14qUeA7","TAKE7",void 0);var y=l.ccclass,S=l.property;e("TAKE7",(T=y("TAKE7"),f=S(r),b=S(d),T((D=t((_=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,o(t,"DialogNode",D,n(t)),t.dialogScript=void 0,o(t,"END",N,n(t)),t.BGM=new s,t.animationPlayed=!1,t.startTime=null,t.playerName=void 0,t.lastTouchTimeRight=0,t.lastTouchTimeLeft=0,t.doubleTouchInterval=.3,t.globalNode=void 0,t}a(t,e);var i=t.prototype;return i.endGame=function(){function e(e){var a=Math.floor(e/3600),o=Math.floor(e%3600/60),n=e%60;return[t(a,2),t(o,2),t(n,2)].join(":")}function t(e,t){var a=e.toString();return a.length>=t?a:"0".repeat(t-a.length)+a}var a,o=new Date,n=Math.round((o.getTime()-this.startTime.getTime())/1e3),i=e(this.globalNode.getGameData().total_duration+n),l=this.globalNode.getGameData().device_model,r=this.globalNode.getGameData().player_name;switch(this.globalNode.getGameData().weapon_used){case 1:a="punch";break;case 2:a="sword";break;case 3:a="bow"}var d={device_model:l,player_name:r,level1_deaths:this.globalNode.getGameData().level1_deaths,level1_duration:e(this.globalNode.getGameData().level1_duration),bandit_defeated:this.globalNode.getGameData().bandit_defeated,level2_deaths:this.globalNode.getGameData().level2_deaths,level2_duration:e(this.globalNode.getGameData().level2_duration),mummy_defeated:this.globalNode.getGameData().mummy_defeated,level3_duration:e(this.globalNode.getGameData().level3_duration),khonsu_defeated:this.globalNode.getGameData().khonsu_defeated,playerHP_remaining:this.globalNode.getGameData().playerHP_remaining,bossHP_remaining:null,weapon_used:a,total_duration:i};fetch("https://www.whaozhi.com/save_time",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.error("Error:",e)}))},i.start=function(){this.startTime=new Date,localStorage.clear(),u.preloadScene("START"),this.BGM=this.node.getComponent(s),this.dialogScript=this.DialogNode.getComponent(m),this.globalNode=h("GlobalNode").getComponent(p),this.playerName=this.globalNode.getGameData().player_name,this.BGM.node.on(s.EventType.ENDED,this.onAudioEnded,this),this.dialogScript.init([{name:"旁白",content:"（"+this.playerName+"完成了自己的使命，日子回歸平常）",url:null},{name:"旁白",content:"（看似一切依舊，但現在有了家人的陪伴）",url:null},{name:"旁白",content:"（或許對"+this.playerName+"來說，這一切就像一場夢吧）",url:null},{name:"旁白",content:"（那麼，在夢醒之後，又會有什麼樣的挑戰等著他呢？）",url:null}])},i.onAudioEnded=function(){u.loadScene("START")},i.onTouchStart=function(e){this.END.node.active=!0,this.END.play(),this.endGame(),this.DialogNode.off(c.EventType.TOUCH_START,this.onTouchStart,this),this.END.node.on(c.EventType.TOUCH_START,this.onTouchToSTART,this)},i.onTouchToSTART=function(e){var t=Date.now()/1e3;t-this.lastTouchTimeRight<this.doubleTouchInterval&&u.loadScene("START"),this.lastTouchTimeRight=t},i.update=function(e){this.DialogNode.active=!0,"（那麼，在夢醒之後，又會有什麼樣的挑戰等著他呢？）"!==this.dialogScript.textLabel.string||this.animationPlayed||(this.animationPlayed=!0,this.DialogNode.on(c.EventType.TOUCH_START,this.onTouchStart,this))},t}(g)).prototype,"DialogNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(_.prototype,"END",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=_))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/tool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,r,i,a,c;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,r=t.resources,i=t.SpriteFrame,a=t.Sprite,c=t.Component}],execute:function(){var u;e._RF.push({},"bc161a0sU1KY7mqOBEipAak","tool",void 0);var s=n.ccclass;n.property,t("tool",s("tool")(u=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(o=t.call.apply(t,[this].concat(n))||this).toolName=void 0,o}o(e,t);var n=e.prototype;return n.init=function(t){var o=this;r.load(t.url,i,(function(t,e){o.node.getComponent(a).spriteFrame=e})),this.toolName=t.name},n.start=function(){},n.getToolName=function(){return this.toolName},n.update=function(t){},e}(c))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/UI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,o,r,u,c,a,h,l,s;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,c=t.Node,a=t.SpriteFrame,h=t.Input,l=t.Sprite,s=t.Component}],execute:function(){var p,T,f,g,C,b,k,m,y,E,B,v,d,A,_,w,S,z,U,F,H;r._RF.push({},"9b256Ah5DpFaYaPVExvym/e","UI",void 0);var L=u.ccclass,R=u.property;t("NewComponent",(p=L("NewComponent"),T=R(c),f=R(c),g=R(c),C=R(a),b=R(a),k=R(a),m=R(a),y=R(a),E=R(a),p((d=n((v=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return n=t.call.apply(t,[this].concat(r))||this,i(n,"leftTouch",d,o(n)),i(n,"rightTouch",A,o(n)),i(n,"attackTouch",_,o(n)),i(n,"rightButton",w,o(n)),i(n,"leftButton",S,o(n)),i(n,"rightButtonClick",z,o(n)),i(n,"leftButtonClick",U,o(n)),i(n,"attackButton",F,o(n)),i(n,"attackButtonClick",H,o(n)),n}e(n,t);var r=n.prototype;return r.start=function(){this.leftTouch.on(h.EventType.TOUCH_START,this.onTouchStartLeft,this),this.rightTouch.on(h.EventType.TOUCH_START,this.onTouchStartRight,this),this.leftTouch.on(h.EventType.TOUCH_END,this.onTouchEndLeft,this),this.rightTouch.on(h.EventType.TOUCH_END,this.onTouchEndRight,this),this.leftTouch.on(h.EventType.TOUCH_CANCEL,this.onTouchEndLeft,this),this.rightTouch.on(h.EventType.TOUCH_CANCEL,this.onTouchEndRight,this),this.attackTouch.on(h.EventType.TOUCH_START,this.onTouchStartAttack,this),this.attackTouch.on(h.EventType.TOUCH_END,this.onTouchEndAttack,this),this.attackTouch.on(h.EventType.TOUCH_CANCEL,this.onTouchEndAttack,this)},r.onTouchStartRight=function(t){this.rightTouch.getComponent(l).spriteFrame=this.rightButtonClick},r.onTouchStartLeft=function(t){this.leftTouch.getComponent(l).spriteFrame=this.leftButtonClick},r.onTouchEndLeft=function(t){this.leftTouch.getComponent(l).spriteFrame=this.leftButton},r.onTouchEndRight=function(t){this.rightTouch.getComponent(l).spriteFrame=this.rightButton},r.onTouchStartAttack=function(t){this.attackTouch.getComponent(l).spriteFrame=this.attackButtonClick},r.onTouchEndAttack=function(t){this.attackTouch.getComponent(l).spriteFrame=this.attackButton},r.update=function(t){},n}(s)).prototype,"leftTouch",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(v.prototype,"rightTouch",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(v.prototype,"attackTouch",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(v.prototype,"rightButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(v.prototype,"leftButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(v.prototype,"rightButtonClick",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(v.prototype,"leftButtonClick",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(v.prototype,"attackButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(v.prototype,"attackButtonClick",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=v))||B));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});